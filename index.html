<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DescomplicaAcadêmico: O Seu Guia Completo para o Sucesso Universitário</title>
    <!-- Tailwind CSS CDN for utility-first styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter for a modern and readable typeface -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <!-- Feather Icons for lightweight and customizable SVG icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        /* Sets the Inter font as the default for the entire document body */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar styles for a cleaner appearance */
        ::-webkit-scrollbar {
            width: 8px; /* Width of the scrollbar */
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; /* Background color of the scrollbar track (slate-100) */
        }
        ::-webkit-scrollbar-thumb {
            background: #38bdf8; /* Color of the scrollbar thumb (sky-400) */
            border-radius: 10px; /* Rounded corners for the thumb */
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #0ea5e9; /* Color of the thumb on hover (sky-500) */
        }
        /* Styles for headings within "prose" content for better visual hierarchy */
        .prose h3 {
            font-size: 1.5rem; /* Font size (equivalent to text-2xl) */
            font-weight: 700; /* Font weight (equivalent to font-bold) */
            margin-top: 2.5em; /* Increased top spacing for better separation */
            margin-bottom: 1em; /* Bottom spacing */
            border-bottom: 2px solid #e2e8f0; /* Bottom border (slate-200) */
            padding-bottom: 0.5rem; /* Bottom padding */
            color: #1e40af; /* Text color (blue-800) */
        }
        .prose h4 {
            font-size: 1.25rem; /* Font size (equivalent to text-xl) */
            font-weight: 600; /* Font weight (equivalent to font-semibold) */
            margin-top: 1.75em; /* Top spacing */
            margin-bottom: 0.75em; /* Bottom spacing */
            color: #0369a1; /* Text color (sky-700) */
        }
        /* Styles for ordered and unordered lists within "prose" content */
        .prose ul, .prose ol {
            margin-top: 1em; /* Top spacing */
            margin-bottom: 1em; /* Bottom spacing */
            padding-left: 1.5em; /* Adjusts list indentation */
        }
        .prose ul li, .prose ol li {
            margin-bottom: 0.5em; /* Spacing between list items */
        }
        /* Styles for links within "prose" content */
        .prose a {
            color: #0ea5e9; /* Link color (sky-500) */
            text-decoration: underline; /* Underline */
        }
        .prose a:hover {
            color: #0284c7; /* Link color on hover (sky-600) */
        }
        /* Styles for the "Back to Top" button */
        #back-to-top {
            position: fixed; /* Fixed position on the screen */
            bottom: 2rem; /* Distance from the bottom */
            right: 2rem; /* Distance from the right */
            background-color: #0ea5e9; /* Background color (sky-500) */
            color: white; /* Text color */
            padding: 0.75rem; /* Padding */
            border-radius: 9999px; /* Fully rounded */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Shadow */
            display: flex; /* Flexbox for centering content */
            align-items: center; /* Aligns items vertically center */
            justify-content: center; /* Aligns items horizontally center */
            cursor: pointer; /* Pointer cursor on hover */
            transition: opacity 0.3s ease-in-out, transform 0.2s ease-in-out; /* Smooth transition for opacity and transform */
            opacity: 0; /* Initially hidden */
            z-index: 1000; /* Z-index to ensure it's above other elements */
        }
        #back-to-top.show {
            opacity: 1; /* Makes the button visible */
        }
        #back-to-top:hover {
            transform: scale(1.05); /* Slightly increases size on hover */
        }

        /* Styles for accordion items (FAQ) */
        .accordion-item {
            border: 1px solid #e2e8f0; /* Border (slate-200) */
            border-radius: 0.5rem; /* Rounded corners (rounded-lg) */
            margin-bottom: 0.75rem; /* Bottom margin (mb-3) */
            overflow: hidden; /* Ensures smooth content transitions */
        }
        .accordion-header {
            background-color: #f8fafc; /* Background color (slate-50) */
            padding: 1rem 1.5rem; /* Padding (py-4 px-6) */
            cursor: pointer; /* Pointer cursor */
            display: flex; /* Flexbox */
            justify-content: space-between; /* Spacing between items */
            align-items: center; /* Aligns items vertically center */
            font-weight: 600; /* Font weight (font-semibold) */
            color: #334155; /* Text color (slate-700) */
            transition: background-color 0.3s ease; /* Smooth transition for background color */
        }
        .accordion-header:hover {
            background-color: #e2e8f0; /* Background color on hover (slate-200) */
        }
        .accordion-header i {
            transition: transform 0.3s ease; /* Smooth transition for icon transform */
        }
        .accordion-header.active i {
            transform: rotate(180deg); /* Icon rotation when active */
        }
        .accordion-content {
            background-color: #ffffff; /* Background color (white) */
            padding: 0 1.5rem; /* Horizontal padding */
            max-height: 0; /* Initial max height to hide content */
            overflow: hidden; /* Prevents scrollbar during collapse */
            transition: max-height 0.4s ease-out, padding 0.4s ease-out; /* Smooth transition for height and padding */
        }
        .accordion-content p {
            padding-bottom: 1.5rem; /* Adds bottom padding to the paragraph within content */
        }

        /* Styles for the Reading Progress Bar */
        #reading-progress-bar {
            position: fixed; /* Fixed position at the top of the screen */
            top: 0; /* Aligned to the top */
            left: 0; /* Aligned to the left */
            height: 4px; /* Height of the progress bar */
            background-color: #f59e0b; /* Background color (amber-500) */
            width: 0%; /* Starts with 0% width */
            z-index: 1001; /* Ensures it's above the header and other elements */
            transition: width 0.1s linear; /* Smooth transition for width */
        }

        /* Specific styles for Quiz sections */
        .quiz-section {
            border: 1px solid #fcd34d; /* Border (amber-300) */
            background-color: #fffbeb; /* Background color (amber-50) */
        }
        .quiz-question {
            min-height: 150px; /* Ensures questions occupy a consistent space */
        }
        .quiz-question .question-feedback {
            font-size: 0.875rem; /* Font size (text-sm) */
            margin-top: 0.25rem; /* Top margin (mt-1) */
        }
        .quiz-question .question-feedback.correct {
            color: #10b981; /* Color for correct feedback (emerald-500) */
        }
        .quiz-question .question-feedback.incorrect {
            color: #dc2626; /* Color for incorrect feedback (red-600) */
        }

        /* Animation for quiz feedback */
        @keyframes pulse-once {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(1.03);
            }
        }
        .animate-feedback-pulse {
            animation: pulse-once 0.5s ease-out; /* Applies the pulse animation */
        }

        /* Specific styles for Pomodoro infographic */
        .pomodoro-infographic-container {
            border: 1px solid #bfdbfe; /* Border (blue-200) */
        }
        .pomodoro-step {
            width: 144px; /* Width (w-36) */
            height: 144px; /* Height (h-36) */
            background-color: #ffffff; /* Background color (white) */
            border-radius: 9999px; /* Fully rounded (rounded-full) */
            display: flex; /* Flexbox */
            flex-direction: column; /* Arranges content vertically */
            align-items: center; /* Centers horizontally */
            justify-content: center; /* Centers vertically */
            text-align: center; /* Centers text within the circle */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* Shadow (shadow-lg) */
            transition: transform 0.3s ease-in-out; /* Smooth transition for transform */
            position: relative; /* Relative position for overlay content */
            overflow: hidden; /* Hides overflowing content */
            cursor: pointer; /* Pointer cursor */
            padding: 10px; /* Adds padding to ensure text doesn't touch borders */
        }

        /* Overlay for description on hover */
        .pomodoro-step .overlay-content {
            position: absolute; /* Absolute position */
            inset: 0; /* Occupies the entire space of the parent element */
            background-color: rgba(0, 0, 0, 0.6); /* Semi-transparent background for text */
            color: white; /* Text color */
            display: flex; /* Flexbox */
            flex-direction: column; /* Arranges content vertically */
            align-items: center; /* Centers horizontally */
            justify-content: center; /* Centers vertically */
            text-align: center; /* Centers text */
            padding: 10px; /* Padding */
            opacity: 0; /* Initially hidden */
            transform: scale(0.9); /* Initial scale for animation */
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out; /* Smooth transition */
            border-radius: 9999px; /* Fully rounded for overlay */
        }
        .pomodoro-step:hover .overlay-content {
            opacity: 0.9; /* Becomes visible on hover */
            transform: scale(1); /* Expands to full size */
        }
        .pomodoro-step i, .pomodoro-step p {
            transition: color 0.3s ease-in-out; /* Smooth transition for icon and paragraph color */
        }
        .pomodoro-step:hover i, .pomodoro-step:hover p {
            color: white !important; /* Forces white color on hover */
        }

        /* Floating social share buttons */
        .social-share-buttons {
            position: fixed; /* Fixed position on the screen */
            right: 1.5rem; /* Distance from the right (right-6) */
            top: 50%; /* Vertically centered */
            transform: translateY(-50%); /* Adjustment for exact vertical centering */
            display: flex; /* Flexbox */
            flex-direction: column; /* Stacks buttons vertically */
            gap: 1rem; /* Spacing between buttons */
            z-index: 999; /* Z-index (below "Back to Top") */
        }
        .social-share-buttons a {
            display: flex; /* Flexbox for centering content */
            align-items: center; /* Aligns items vertically center */
            justify-content: center; /* Aligns items horizontally center */
            width: 3rem; /* Button width (w-12) */
            height: 3rem; /* Button height (h-12) */
            border-radius: 9999px; /* Fully round */
            color: white; /* Text color */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Shadow */
            transition: transform 0.2s ease-in-out, background-color 0.2s ease-in-out; /* Smooth transition */
        }
        .social-share-buttons a:hover {
            transform: scale(1.1); /* Slightly increases size on hover */
        }
        /* Specific colors for each social network */
        .social-share-buttons a.twitter { background-color: #1DA1F2; } /* Twitter Blue */
        .social-share-buttons a.twitter:hover { background-color: #1790D4; }
        .social-share-buttons a.linkedin { background-color: #0A66C2; } /* LinkedIn Blue */
        .social-share-buttons a.linkedin:hover { background-color: #0857A6; }

        /* Specific styles for Pomodoro Timer */
        .pomodoro-timer-container {
            border: 1px solid #bfdbfe; /* Border (blue-200) */
            background-color: #eff6ff; /* Background color (blue-50) */
        }
        .pomodoro-time {
            font-family: 'Inter', sans-serif; /* Inter font */
            font-size: 3rem; /* Font size (text-5xl) */
            font-weight: 800; /* Font weight (font-extrabold) */
            color: #1e40af; /* Text color (blue-800) */
            min-width: 160px; /* Minimum width for the display */
        }
        .pomodoro-status {
            font-weight: 600; /* Font weight (font-semibold) */
            color: #0369a1; /* Text color (sky-700) */
        }
        .pomodoro-controls button {
            transition: background-color 0.2s, transform 0.2s; /* Smooth transition for buttons */
        }
        .pomodoro-settings input {
            width: 70px; /* Small fixed width for inputs */
        }

        /* Styles for Flashcards */
        .flashcard-section {
            border: 1px solid #dbeafe; /* Border (blue-100) */
            background-color: #f0f9ff; /* Background color (blue-50) */
        }
        .flashcard-display {
            min-height: 120px; /* Minimum height for the flashcard display */
            display: flex; /* Flexbox */
            align-items: center; /* Aligns items vertically center */
            justify-content: center; /* Aligns items horizontally center */
            cursor: pointer; /* Pointer cursor */
            user-select: none; /* Disables text selection */
            transition: background-color 0.3s, transform 0.3s; /* Smooth transition */
            transform-style: preserve-3d; /* Preserves 3D style for flipping effect */
            perspective: 1000px; /* Perspective for 3D effect */
        }
        .flashcard-content {
            position: absolute; /* Absolute position for content (term/definition) */
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            backface-visibility: hidden; /* Hides the back face */
            display: flex; /* Flexbox */
            align-items: center; /* Aligns items vertically center */
            justify-content: center; /* Aligns items horizontally center */
            padding: 1rem; /* Padding */
            border-radius: 0.75rem; /* Rounded corners */
            text-align: center; /* Centers text */
        }
        .flashcard-term {
            background-color: #e0f2fe; /* Background color (light blue) */
            color: #1e40af; /* Text color (dark blue) */
            transform: rotateY(0deg); /* Initial rotation */
        }
        .flashcard-definition {
            background-color: #bfdbfe; /* Background color (slightly darker blue) */
            color: #0369a1; /* Text color (even darker blue) */
            transform: rotateY(180deg); /* Initial rotation for definition (hidden) */
        }
        .flashcard-display.flipped .flashcard-term {
            transform: rotateY(180deg); /* Flips the term to the back */
        }
        .flashcard-display.flipped .flashcard-definition {
            transform: rotateY(360deg); /* Flips the definition to the front */
        }
        /* Style for disabled radio inputs in the quiz */
        .quiz-question input[type="radio"]:disabled + label {
            opacity: 0.7; /* Reduces opacity */
            cursor: not-allowed; /* Changes cursor */
        }
        /* Styles for generated questions in the question generator */
        .generated-question-item {
            background-color: #f8fafc; /* slate-50 */
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 0.75rem;
            border: 1px solid #e2e8f0; /* slate-200 */
        }
        .generated-question-item p.question-text {
            font-weight: 600; /* font-semibold */
            color: #334155; /* slate-700 */
            margin-bottom: 0.75rem; /* mb-3 */
        }
        .generated-question-item .toggle-answer-btn {
            background-color: #38bdf8; /* sky-400 */
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-size: 0.875rem; /* text-sm */
            transition: background-color 0.2s ease-in-out;
        }
        .generated-question-item .toggle-answer-btn:hover {
            background-color: #0ea5e9; /* sky-500 */
        }
        .generated-question-item .generated-answer-content {
            margin-top: 0.75rem; /* mt-3 */
            padding: 1rem;
            background-color: #e0f2fe; /* blue-100 */
            border-radius: 0.375rem;
            border: 1px solid #bfdbfe; /* blue-200 */
            color: #1e40af; /* blue-800 */
            display: none; /* Hidden by default */
        }
        .generated-question-item .generated-answer-content.show {
            display: block; /* Show when 'show' class is added */
        }
        /* Styles for custom message box */
        .custom-message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10000;
            padding: 12px 20px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            animation: fadeOut 4s forwards;
            gap: 10px; /* Space between icon and text */
        }
        .custom-message.success {
            background-color: #d1fae5; /* emerald-100 */
            color: #065f46; /* emerald-700 */
            border: 1px solid #34d399; /* emerald-400 */
        }
        .custom-message.error {
            background-color: #fee2e2; /* red-100 */
            color: #991b1b; /* red-700 */
            border: 1px solid #ef4444; /* red-400 */
        }
        .custom-message.info {
            background-color: #dbeafe; /* blue-100 */
            color: #1e40af; /* blue-700 */
            border: 1px solid #60a5fa; /* blue-400 */
        }
        @keyframes fadeOut {
            0% { opacity: 1; transform: translateX(-50%) translateY(0); }
            90% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }

        /* New: Styles for input feedback pulse */
        @keyframes pulse-border {
            0% { border-color: #60a5fa; } /* blue-400 */
            50% { border-color: #10b981; } /* emerald-500 */
            100% { border-color: #60a5fa; } /* blue-400 */
        }
        .input-feedback-pulse {
            animation: pulse-border 1.5s infinite alternate; /* Applies a pulsing border effect */
        }

        /* Styles for Study Planner */
        .study-plan-item {
            background-color: #f0f9ff; /* blue-50 */
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 0.75rem;
            border: 1px solid #dbeafe; /* blue-100 */
        }
        .study-plan-item .day-title {
            font-weight: 700; /* font-bold */
            color: #1e40af; /* blue-800 */
            font-size: 1.125rem; /* text-lg */
            margin-bottom: 0.5rem;
        }
        .study-plan-item .focus-areas {
            color: #0369a1; /* sky-700 */
            font-weight: 600; /* font-semibold */
            margin-bottom: 0.5rem;
        }
        .study-plan-item ul {
            list-style-type: none; /* Remove default list style */
            padding-left: 0; /* Remove default padding */
        }
        .study-plan-item ul li {
            margin-bottom: 0.25rem;
            display: flex; /* Flexbox for checkbox alignment */
            align-items: center; /* Center items vertically */
            color: #334155; /* slate-700 */
        }
        .study-plan-item ul li .task-checkbox {
            margin-right: 0.5rem; /* Space between checkbox and text */
            min-width: 1rem; /* Ensure checkbox has a minimum width */
            min-height: 1rem; /* Ensure checkbox has a minimum height */
        }
        .study-plan-item ul li.completed-task {
            text-decoration: line-through; /* Strikethrough for completed tasks */
            color: #64748b; /* slate-500 */
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Reading Progress Bar (with ARIA attributes for accessibility) -->
    <div id="reading-progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>

    <!-- Header (sticky for persistent navigation) -->
    <header class="bg-white shadow-md sticky top-0 z-20">
        <div class="container mx-auto px-6 py-4 rounded-b-xl">
            <div class="flex flex-col md:flex-row items-center justify-between">
                <div class="text-center md:text-left mb-4 md:mb-0">
                    <h1 class="text-3xl font-extrabold text-sky-500">DescomplicaAcadêmico</h1>
                    <p class="text-slate-500 mt-1">O Seu Guia Completo para o Sucesso Universitário</p>
                </div>
                <!-- Main Navigation (with ARIA attributes) -->
                <nav class="flex space-x-4" aria-label="Navegação Principal">
                    <a href="#hero-section" class="text-slate-600 hover:text-sky-500 font-medium transition duration-300 scroll-link" aria-label="Ir para a seção Início">Início</a>
                    <a href="#guia" class="text-slate-600 hover:text-sky-500 font-medium transition duration-300 scroll-link" aria-label="Ir para a seção Guia">Guia</a>
                    <a href="#gerador-questoes" class="text-slate-600 hover:text-sky-500 font-medium transition duration-300 scroll-link" aria-label="Ir para a seção Gerador de Questões">Gerador de Questões</a>
                    <a href="#planejador-estudos" class="text-slate-600 hover:text-sky-500 font-medium transition duration-300 scroll-link" aria-label="Ir para a seção Planejador de Estudos">Planejador de Estudos</a>
                    <a href="#organizacao-anotacoes" class="text-slate-600 hover:text-sky-500 font-medium transition duration-300 scroll-link" aria-label="Ir para a seção Gestão de Anotações e Organização">Anotações</a>
                    <a href="#faq-section" class="text-slate-600 hover:text-sky-500 font-medium transition duration-300 scroll-link" aria-label="Ir para a seção FAQ">FAQ</a>
                    <a href="#sobre" class="text-slate-600 hover:text-sky-500 font-medium transition duration-300 scroll-link" aria-label="Ir para a seção Sobre">Sobre</a>
                    <a href="#contato" class="text-slate-600 hover:text-sky-500 font-medium transition duration-300 scroll-link" aria-label="Ir para a seção Contato">Contato</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Page Content -->
    <main class="container mx-auto px-6 py-12">
        
        <!-- Hero Section (introduction and call to action) -->
        <section id="hero-section" class="text-center mb-12 bg-gradient-to-r from-sky-500 to-blue-700 text-white p-12 rounded-2xl shadow-lg">
            <h2 class="text-4xl font-bold mb-3 flex items-center justify-center">
                <i data-feather="award" class="w-10 h-10 mr-3 text-sky-200 opacity-70" aria-hidden="true"></i>
                Seja bem-vindo ao DescomplicaAcadêmico!
            </h2>
            <p class="max-w-3xl mx-auto text-lg text-sky-100">Nosso objetivo é te ajudar a conquistar seus objetivos acadêmicos, otimizando seu tempo, reduzindo o estresse e transformando o aprendizado em uma jornada mais leve e eficaz.</p>
            <!-- CTA button to download the free guide -->
            <a href="#newsletter-section" class="mt-8 bg-amber-500 text-white font-bold py-3 px-8 rounded-full shadow-xl hover:bg-amber-600 transition duration-300 transform hover:scale-105 inline-block scroll-link" aria-label="Baixe o Guia Gratuito">
                Baixe o Guia Gratuito
            </a>
        </section>

        <!-- Newsletter Form Success Message (Initially hidden, with ARIA accessibility) -->
        <div id="form-success-message" class="hidden bg-emerald-100 border border-emerald-400 text-emerald-700 px-6 py-4 rounded-lg mb-8 text-center" role="alert" aria-live="polite">
            <div class="flex items-center justify-center mb-2">
                <i data-feather="check-circle" class="w-6 h-6 mr-3 text-emerald-500" aria-hidden="true"></i>
                <p class="font-bold text-lg">Inscrição realizada com sucesso!</p>
            </div>
            <p>Obrigado pela sua inscrição! Pode descarregar o seu guia completo para o sucesso universitário aqui:</p>
            <!-- Link to the PDF (kept user's file name) -->
            <a id="download-guide-link" href="./guia-completo-descomplica.pdf" target="_blank" rel="noopener noreferrer" class="mt-4 inline-block bg-emerald-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-emerald-700 transition duration-300 transform hover:scale-105" aria-label="Descarregar o Guia Agora">
                <i data-feather="download" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i>
                Descarregar o Guia Agora
            </a>
        </div>

        <div class="flex flex-col lg:flex-row gap-12">

            <!-- Articles/Main Content Section -->
            <div class="w-full lg:w-2/3" id="guia">
                
                <!-- Main Article (with ARIA accessibility) -->
                <article class="bg-white p-8 rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 mb-12" aria-labelledby="article-title">
                    <div class="mb-4">
                        <span class="text-sm text-slate-500">Publicado em 09 de Junho de 2025</span>
                    </div>
                    <h2 id="article-title" class="text-3xl font-bold text-slate-800 mb-6">O Guia Definitivo para o Sucesso Universitário</h2>
                    <!-- Image of university success -->
                    <img src="https://placehold.co/800x400/38bdf8/ffffff?text=Sucesso+Universit%C3%A1rio" alt="Imagem ilustrativa sobre sucesso universitário" class="rounded-lg mb-6 w-full h-auto" loading="lazy" aria-description="Ilustração de sucesso universitário com livros e símbolos académicos.">
                    
                    <div class="prose max-w-none text-slate-700 leading-relaxed">
                        <p>O ambiente universitário é um período de grande aprendizado e crescimento, mas também pode ser desafiador. Para prosperar, não basta apenas estudar muito; é preciso estudar de forma <strong>inteligente</strong>. Este guia oferece métodos de estudo comprovados e dicas valiosas para você alcançar o sucesso acadêmico e pessoal.</p>

                        <h3 id="metodos-estudo">1. Métodos de Estudo Eficazes: Mais Inteligência, Menos Esforço Desnecessário</h3>
                        <p>Estudar não é só ler e reler. Existem técnicas que otimizam seu tempo e garantem que o conhecimento realmente se fixe.</p>
                        
                        <h4 id="tecnica-pomodoro">1.1. Técnica Pomodoro: Foco Cronometrado</h4>
                        <p>A <strong>Técnica Pomodoro</strong> envolve dividir seu tempo de estudo em blocos de 25 minutos de foco intenso, seguidos por 5 minutos de descanso. A cada quatro "pomodoros", faça uma pausa mais longa de 15 a 30 minutos.</p>
                        <p class="italic text-slate-600 border-l-4 border-sky-400 pl-4 py-2 my-4 rounded-md">
                            <strong>Exemplo Prático:</strong> Quando eu estava a preparar-me para exames de fisiologia, sentia que a matéria era densa e a minha concentração falhava. Comecei a usar o Pomodoro: 25 minutos a estudar um sistema específico (ex: cardiovascular), 5 minutos a levantar-me, beber água e espreitar o telemóvel. Depois de quatro blocos, uma pausa maior para um lanche. Senti uma diferença enorme na minha capacidade de manter o foco e na absorção do conteúdo.
                        </p>
                        <p class="text-sm text-slate-500 mt-2">
                            <strong>Estudo de Apoio:</strong> Saiba mais sobre a eficácia do Pomodoro em produtividade e aprendizado <a href="https://napratica.org.br/pomodoro/" target="_blank" rel="noopener noreferrer" class="font-semibold text-sky-500 hover:text-sky-600">aqui</a>.
                        </p>

                        <!-- Interactive Infographic for Pomodoro Technique (with ARIA accessibility) -->
                        <div class="pomodoro-infographic-container bg-blue-100 p-6 rounded-lg my-8 shadow-inner flex flex-col items-center" role="contentinfo" aria-label="Infográfico da Técnica Pomodoro">
                            <h5 class="text-xl font-bold text-blue-800 mb-4">O Ciclo da Técnica Pomodoro</h5>
                            <div class="flex flex-col md:flex-row items-center justify-center space-y-6 md:space-y-0 md:space-x-8 w-full">

                                <!-- Focus Step -->
                                <div class="pomodoro-step relative w-36 h-36 bg-white rounded-full flex flex-col items-center justify-center shadow-lg transform transition-transform duration-300 hover:scale-105 group" tabindex="0" role="button" aria-label="Passo de Foco: 25 minutos de concentração intensa na tarefa.">
                                    <i data-feather="target" class="w-10 h-10 text-sky-500 transition-colors duration-300 group-hover:text-white" aria-hidden="true"></i>
                                    <p class="text-lg font-bold text-slate-700 mt-2 transition-colors duration-300 group-hover:text-white">Foco</p>
                                    <p class="text-sm text-slate-500 transition-colors duration-300 group-hover:text-sky-100">25 min</p>
                                    <div class="overlay-content">
                                        <span class="text-white text-center text-sm">Concentração intensa na tarefa, evite distrações.</span>
                                    </div>
                                </div>

                                <!-- Arrow 1 -->
                                <div class="flex flex-col items-center justify-center text-blue-600 mx-4 shrink-0 min-w-[50px]" aria-hidden="true">
                                    <i data-feather="arrow-right" class="w-12 h-12 text-blue-600 transform rotate-90 md:rotate-0"></i>
                                </div>

                                <!-- Short Break -->
                                <div class="pomodoro-step relative w-36 h-36 bg-white rounded-full flex flex-col items-center justify-center shadow-lg transform transition-transform duration-300 hover:scale-105 group" tabindex="0" role="button" aria-label="Passo de Pausa Curta: 5 minutos para descansar e relaxar.">
                                    <i data-feather="coffee" class="w-10 h-10 text-green-500 transition-colors duration-300 group-hover:text-white" aria-hidden="true"></i>
                                    <p class="text-lg font-bold text-slate-700 mt-2 transition-colors duration-300 group-hover:text-white">Pausa Curta</p>
                                    <p class="text-sm text-slate-500 transition-colors duration-300 group-hover:text-green-100">5 min</p>
                                    <div class="overlay-content">
                                        <span class="text-white text-center text-sm">Descanse os olhos, alongue-se, beba água.</span>
                                    </div>
                                </div>

                                <!-- Arrow 2 (after 4 cycles) -->
                                <div class="flex flex-col items-center justify-center text-blue-600 mx-4 shrink-0" aria-hidden="true">
                                    <i data-feather="arrow-right" class="w-12 h-12 text-blue-600 transform rotate-90 md:rotate-0"></i>
                                    <span class="text-xs text-slate-600 font-normal whitespace-nowrap text-center mt-2 md:mt-0">após 4 ciclos</span>
                                </div>

                                <!-- Long Break -->
                                <div class="pomodoro-step relative w-36 h-36 bg-white rounded-full flex flex-col items-center justify-center shadow-lg transform transition-transform duration-300 hover:scale-105 group" tabindex="0" role="button" aria-label="Passo de Pausa Longa: 15 a 30 minutos para um relaxamento mais profundo.">
                                    <i data-feather="moon" class="w-10 h-10 text-purple-500 transition-colors duration-300 group-hover:text-white" aria-hidden="true"></i>
                                    <p class="text-lg font-bold text-slate-700 mt-2 transition-colors duration-300 group-hover:text-white">Pausa Longa</p>
                                    <p class="text-sm text-slate-500 transition-colors duration-300 group-hover:text-purple-100">15-30 min</p>
                                    <div class="overlay-content">
                                        <span class="text-white text-center text-sm">Relaxe, coma, faça algo que te dê prazer.</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-sm text-slate-600 mt-6 text-center max-w-md">Realize 4 ciclos de Foco e Pausa Curta, seguidos por uma Pausa Longa.</p>
                        </div>

                        <!-- Interactive Pomodoro Timer (with ARIA accessibility) -->
                        <div class="pomodoro-timer-container bg-blue-50 p-6 rounded-lg my-8 shadow-inner flex flex-col items-center border-blue-200" role="timer" aria-live="polite">
                            <h4 class="text-xl font-bold mb-4 text-blue-700">Timer Pomodoro Interativo</h4>
                            <div class="flex items-center space-x-4 mb-6">
                                <p class="pomodoro-status text-lg font-semibold" aria-atomic="true" aria-relevant="text">Foco</p>
                                <div class="pomodoro-time" id="pomodoro-display" aria-atomic="true" aria-live="assertive">25:00</div>
                            </div>
                            <div class="pomodoro-controls flex space-x-4 mb-6">
                                <button id="pomodoro-start" class="bg-emerald-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-emerald-600 transform hover:scale-105 transition-all duration-300" aria-label="Iniciar Timer">
                                    <i data-feather="play" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Iniciar
                                </button>
                                <button id="pomodoro-pause" class="bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 transform hover:scale-105 transition-all duration-300" disabled aria-label="Pausar Timer">
                                    <i data-feather="pause" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Pausar
                                </button>
                                <button id="pomodoro-reset" class="bg-red-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-600 transform hover:scale-105 transition-all duration-300" aria-label="Resetar Timer">
                                    <i data-feather="rotate-ccw" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Resetar
                                </button>
                            </div>
                            <div class="pomodoro-settings flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-4 text-slate-700 text-sm">
                                <label class="flex items-center space-x-2">
                                    <span class="font-medium">Foco (min):</span>
                                    <input type="number" id="pomodoro-focus-time" value="25" min="1" class="px-2 py-1 border border-slate-300 rounded-md text-center" aria-label="Tempo de Foco em minutos">
                                </label>
                                <label class="flex items-center space-x-2">
                                    <span class="font-medium">Pausa Curta (min):</span>
                                    <input type="number" id="pomodoro-short-break-time" value="5" min="1" class="px-2 py-1 border border-slate-300 rounded-md text-center" aria-label="Tempo de Pausa Curta em minutos">
                                </label>
                                <label class="flex items-center space-x-2">
                                    <span class="font-medium">Pausa Longa (min):</span>
                                    <input type="number" id="pomodoro-long-break-time" value="15" min="1" class="px-2 py-1 border border-slate-300 rounded-md text-center" aria-label="Tempo de Pausa Longa em minutos">
                                </label>
                            </div>
                        </div>

                        <!-- Bloco de Anúncio 1: Amazon Affiliate Product (Moved from sidebar) -->
                        <div class="my-8 bg-blue-50 p-4 rounded-lg border border-blue-200 text-center shadow-md">
                            <p class="text-sm mb-2 text-blue-700 font-semibold">Recomendado para o seu foco!</p>
                            <a href="https://www.amazon.com.br/soundcore-Cancelamento-Reprodu%C3%A7%C3%A3o-Personaliza%C3%A7%C3%A3o-Transpar%C3%AAncia/dp/B0C3HCD34R?__mk_pt_BR=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=10W70J1EIQSZW&dib=eyJ2IjoiMSJ9.3aIDTJpDLJwk5RDZpmB-EDiHf5LbEb91o3woLEPt0UEqYv978bNPOzvlB087c-SRqMVzM_31YKOK-b2fvYAPhz5OY8t9VL2KrEuVtmRjq3lEPIaF-fpR02kdPiAefwSbjZ3kR3Y3egpdpMC1WCzKP0p0P9d0CVU1gJfCuPYZwNMAySrrZEJ2lu0304pJvoM4FowI3jvIwbFRtWnY8Um4B-RJxLRI9ak0U9NXMeQV_n7Ww3s1pzL9Y_EbkIZyCZZp7lBSS5y2_AW1SHdDE9qnmCOvWXoF8m8eUIaYc4_iKhU.cX31oonOJidfz9gffreHthQm2GQqa_dhhBzWcHeFoW0&dib_tag=se&keywords=fone%2Bxiaomi%2Bredmi%2Bbuds&qid=1750089760&sprefix=fone%2Bxiaomi%2Bredmi%2Bbuds%2Caps%2C180&sr=8-1-spons&ufe=app_do%3Aamzn1.fos.4bddec23-2dcf-4403-8597-e1a02442043d&sp_csd=d2lkZ2V0TmFtZT1zcF9hdGY&th=1&linkCode=ll1&tag=descompli073a-20&linkId=62afe9fb103d2160004a4849a8d367a8&language=pt_BR&ref_=as_li_ss_tl" target="_blank" rel="nofollow noopener" aria-label="Comprar Fone de Ouvido Xiaomi Redmi Buds 4 Active na Amazon">
                                <img src="https://m.media-amazon.com/images/I/6196rZ67rvL._AC_SX679_.jpg" alt="Fone de Ouvido Xiaomi Redmi Buds 4 Active" class="w-full h-auto block mx-auto rounded-lg mb-3" onerror="this.onerror=null;this.src='https://placehold.co/679x679/38bdf8/ffffff?text=Imagem+N%C3%A3o+Dispon%C3%ADvel';">
                                <p class="text-sm text-slate-800 font-semibold mb-1">Xiaomi Redmi Buds 4 Active - Fone de Ouvido sem Fio</p>
                                <p class="text-xs text-blue-600">Conforto e qualidade de som para seus estudos.</p>
                            </a>
                        </div>
                        <!-- End of Moved Ad Block -->

                        <!-- Quiz for the Pomodoro section (with ARIA accessibility) -->
                        <div id="quiz-pomodoro-section" class="quiz-section bg-amber-50 p-6 rounded-lg my-8 shadow-inner border-amber-100" role="group" aria-labelledby="quiz-pomodoro-title">
                            <h4 id="quiz-pomodoro-title" class="text-xl font-bold mb-4 text-blue-700">Teste os seus conhecimentos sobre a Técnica Pomodoro!</h4>
                            <p id="quiz-pomodoro-counter" class="text-sm text-slate-500 mb-4 text-center" aria-live="polite" aria-atomic="true"></p>
                            <div id="quiz-pomodoro-questions-container" role="region" aria-live="polite"></div>
                            <div class="flex justify-between mt-4">
                                <button id="quiz-pomodoro-prev" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition duration-300" disabled aria-label="Pergunta Anterior">
                                    <i data-feather="arrow-left" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Anterior
                                </button>
                                <button id="quiz-pomodoro-next" class="bg-sky-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-700 transition duration-300" aria-label="Próxima Pergunta">
                                    <i data-feather="arrow-right" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Próxima
                                </button>
                                <button id="quiz-pomodoro-submit-final" class="bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-emerald-700 transition duration-300 hidden" aria-label="Ver Resultados do Quiz">
                                    <i data-feather="check-circle" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Ver Resultados
                                </button>
                            </div>
                            <div id="quiz-pomodoro-result" class="mt-4 text-center font-semibold" aria-live="polite"></div>
                            <button id="quiz-pomodoro-retry" class="mt-4 bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 hidden mx-auto block" aria-label="Tentar Novamente o Quiz">
                                <i data-feather="refresh-ccw" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Tentar Novamente
                            </button>
                        </div>

                        <h4 id="estudo-ativo">1.2. Estudo Ativo e Recuperação Ativa: Ponha o Cérebro a Trabalhar</h4>
                        <p>Em vez de apenas consumir informação passivamente, o <strong>estudo ativo</strong> e a <strong>recuperação ativa</strong> forçam o seu cérebro a recuperar o conhecimento, o que fortalece as conexões neurais.</p>
                        <p><strong>Técnicas Comuns:</strong></p>
                        <ul class="list-disc list-inside">
                            <li><strong>Testes Práticos:</strong> Faça simulados, resolva exercícios e responda a perguntas sem consultar o material.</li>
                            <li><strong>Flashcards:</strong> Use flashcards (digitais ou físicos) para testar o seu conhecimento sobre termos, conceitos e fórmulas.</li>
                            <li><strong>Autoexplicação:</strong> Explique a matéria em voz alta para si mesmo, como se estivesse a ensinar alguém.</li>
                            <li><strong>Elaboração:</strong> Relacione o que está a aprender com o que já sabe ou com experiências pessoais.</li>
                        </ul>
                        <p class="italic text-slate-600 border-l-4 border-sky-400 pl-4 py-2 my-4 rounded-md">
                            <strong>Exemplo Prático:</strong> Para a cadeira de Direito Constitucional, eu lia os acórdãos e, em vez de só sublinhar, tentava explicar a fundamentação jurídica em voz alta para a minha parede. Depois, tentava escrever um resumo da decisão sem olhar para o texto original. Era difícil no início, mas forcei-me a pensar ativamente sobre o assunto, e isso fez toda a diferença na hora da prova.
                        </p>
                        <p class="text-sm text-slate-500 mt-2">
                            Pesquisas mostram que a recuperação ativa é mais eficaz que a releitura para memorização.
                        </p>
                        <!-- Quiz for the Active Study section -->
                        <div id="quiz-estudoAtivo-section" class="quiz-section bg-amber-50 p-6 rounded-lg my-8 shadow-inner border-amber-100" role="group" aria-labelledby="quiz-estudoAtivo-title">
                            <h4 id="quiz-estudoAtivo-title" class="text-xl font-bold mb-4 text-blue-700">Teste os seus conhecimentos sobre Estudo Ativo!</h4>
                            <p id="quiz-estudoAtivo-counter" class="text-sm text-slate-500 mb-4 text-center" aria-live="polite" aria-atomic="true"></p>
                            <div id="quiz-estudoAtivo-questions-container" role="region" aria-live="polite"></div>
                            <div class="flex justify-between mt-4">
                                <button id="quiz-estudoAtivo-prev" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition duration-300" disabled aria-label="Pergunta Anterior">
                                    <i data-feather="arrow-left" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Anterior
                                </button>
                                <button id="quiz-estudoAtivo-next" class="bg-sky-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-700 transition duration-300" aria-label="Próxima Pergunta">
                                    <i data-feather="arrow-right" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Próxima
                                </button>
                                <button id="quiz-estudoAtivo-submit-final" class="bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-emerald-700 transition duration-300 hidden" aria-label="Ver Resultados do Quiz">
                                    <i data-feather="check-circle" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Ver Resultados
                                </button>
                            </div>
                            <div id="quiz-estudoAtivo-result" class="mt-4 text-center font-semibold" aria-live="polite"></div>
                            <button id="quiz-estudoAtivo-retry" class="mt-4 bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 hidden mx-auto block" aria-label="Tentar Novamente o Quiz">
                                <i data-feather="refresh-ccw" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Tentar Novamente
                            </button>
                        </div>

                        <h4 id="repeticao-espacada">1.3. Repetição Espaçada: Otimize a Memorização a Longo Prazo</h4>
                        <p>A <strong>Repetição Espaçada</strong> é um método que envolve revisar o material em intervalos crescentes de tempo. Em vez de rever tudo todos os dias, você revisa mais frequentemente o que tem dificuldade e menos o que já domina.</p>
                        <ul class="list-disc list-inside">
                            <li><strong>Ferramentas:</strong> Aplicações como <strong>Anki</strong> e <strong>Quizlet</strong> são excelentes para implementar a repetição espaçada com flashcards.</li>
                            <li><strong>Estudo/Artigo de Apoio:</strong> A pesquisa sobre a <strong>curva de esquecimento de Ebbinghaus</strong> é a base para a eficácia da repetição espaçada. Pode ler mais sobre o assunto <a href="https://en.wikipedia.org/wiki/Forgetting_curve" target="_blank" rel="noopener noreferrer" class="font-semibold text-sky-500 hover:text-sky-600">aqui</a> (em inglês).</li>
                        </ul>
                        <p class="italic text-slate-600 border-l-4 border-sky-400 pl-4 py-2 my-4 rounded-md">
                            <strong>Exemplo Prático:</strong> Eu usava o Anki para as aulas de anatomia. Criava flashcards com imagens de músculos e seus nomes, e o aplicativo me mostrava os cartões em intervalos otimizados, fazendo com que eu revisasse o que eu esquecia com mais frequência, e o que eu já sabia ficava para depois. Foi essencial para memorizar tantos termos!
                        </p>

                        <!-- Flashcard Creator and Revisor (with ARIA accessibility) -->
                        <div class="flashcard-section bg-blue-50 p-6 rounded-lg my-8 shadow-inner border-blue-100" role="region" aria-labelledby="flashcard-title">
                            <h4 id="flashcard-title" class="text-xl font-bold mb-4 text-blue-700">Criador e Revisor de Flashcards</h4>
                            <div class="space-y-4 mb-6">
                                <div class="flex items-end gap-2">
                                    <div class="flex-grow">
                                        <label for="flashcard-term" class="block text-slate-700 text-sm font-bold mb-2">Termo:</label>
                                        <input type="text" id="flashcard-term" placeholder="Digite o termo" class="w-full px-4 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500" aria-required="true" aria-label="Termo do flashcard">
                                    </div>
                                    <button id="generate-definition" class="whitespace-nowrap bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 transform hover:scale-105 flex items-center justify-center" aria-label="Gerar Definição com IA">
                                        Gerar Definição ✨
                                        <i data-feather="loader" class="animate-spin ml-2 hidden" id="definition-loader" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div>
                                    <label for="flashcard-definition" class="block text-slate-700 text-sm font-bold mb-2">Definição:</label>
                                    <textarea id="flashcard-definition" placeholder="Digite a definição" rows="3" class="w-full px-4 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500" aria-required="true" aria-label="Definição do flashcard"></textarea>
                                </div>
                                <button id="add-flashcard" class="w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300 transform hover:scale-105" aria-label="Adicionar Flashcard">
                                    <i data-feather="plus-circle" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Adicionar Flashcard
                                </button>
                            </div>

                            <div class="border border-blue-200 bg-white rounded-lg p-4 mb-6 relative shadow-md">
                                <p class="text-slate-600 text-sm mb-3 text-center">Clique no flashcard para virar.</p>
                                <!-- Dropdown to select Flashcard (with ARIA accessibility) -->
                                <div class="mb-4">
                                    <label for="flashcard-selector" class="block text-slate-700 text-sm font-bold mb-2">Selecione um Flashcard:</label>
                                    <select id="flashcard-selector" class="w-full px-4 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500" aria-label="Selecione um flashcard para revisar">
                                        <option value="-1">Nenhum flashcard para selecionar...</option>
                                    </select>
                                </div>
                                <!-- Flashcard display area (with ARIA accessibility and card role) -->
                                <div id="flashcard-display" class="flashcard-display relative w-full h-40 bg-gray-100 rounded-lg border-2 border-blue-300 overflow-hidden shadow-inner" role="region" aria-live="polite" aria-atomic="true">
                                    <div class="flashcard-content flashcard-term flex items-center justify-center text-xl font-bold text-slate-800" aria-hidden="false">
                                        <span id="current-flashcard-term">Nenhum flashcard adicionado.</span>
                                    </div>
                                    <div class="flashcard-content flashcard-definition hidden flex-col items-center justify-content-center text-slate-700 text-base" aria-hidden="true">
                                        <span id="current-flashcard-definition"></span>
                                        <p class="text-xs text-slate-500 mt-2">(Definição)</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
                                <button id="delete-current-flashcard" class="w-full bg-red-400 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-500 transition duration-300 transform hover:scale-105" aria-label="Excluir Flashcard Atual">
                                    <i data-feather="trash" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Excluir Flashcard Atual
                                </button>
                                <button id="clear-flashcards" class="w-full bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 transition duration-300 transform hover:scale-105" aria-label="Limpar todos os Flashcards">
                                    <i data-feather="trash-2" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Limpar Todos
                                </button>
                            </div>
                            <p id="flashcard-count" class="text-sm text-slate-600 mt-4 text-center" aria-live="polite">Total de flashcards: 0</p>
                        </div>

                        <!-- Quiz for the Spaced Repetition section -->
                        <div id="quiz-repeticaoEspacada-section" class="quiz-section bg-amber-50 p-6 rounded-lg my-8 shadow-inner border-amber-100" role="group" aria-labelledby="quiz-repeticaoEspacada-title">
                            <h4 id="quiz-repeticaoEspacada-title" class="text-xl font-bold mb-4 text-blue-700">Teste os seus conhecimentos sobre Repetição Espaçada!</h4>
                            <p id="quiz-repeticaoEspacada-counter" class="text-sm text-slate-500 mb-4 text-center" aria-live="polite" aria-atomic="true"></p>
                            <div id="quiz-repeticaoEspacada-questions-container" role="region" aria-live="polite"></div>
                            <div class="flex justify-between mt-4">
                                <button id="quiz-repeticaoEspacada-prev" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition duration-300" disabled aria-label="Pergunta Anterior">
                                    <i data-feather="arrow-left" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Anterior
                                </button>
                                <button id="quiz-repeticaoEspacada-next" class="bg-sky-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-700 transition duration-300" aria-label="Próxima Pergunta">
                                    <i data-feather="arrow-right" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Próxima
                                </button>
                                <button id="quiz-repeticaoEspacada-submit-final" class="bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-emerald-700 transition duration-300 hidden" aria-label="Ver Resultados do Quiz">
                                    <i data-feather="check-circle" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Ver Resultados
                                </button>
                            </div>
                            <div id="quiz-repeticaoEspacada-result" class="mt-4 text-center font-semibold" aria-live="polite"></div>
                            <button id="quiz-repeticaoEspacada-retry" class="mt-4 bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 hidden mx-auto block" aria-label="Tentar Novamente o Quiz">
                                <i data-feather="refresh-ccw" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Tentar Novamente
                            </button>
                        </div>

                        <h4 id="mapas-mentais">1.4. Mapas Mentais: Visualização para Compreensão</h4>
                        <p><strong>Como funciona:</strong> Comece com a ideia central no centro. Puxe ramos para as ideias principais, usando cores diferentes. De cada ramo, puxe sub-ramos com palavras-chave, imagens e símbolos. Faça conexões entre os ramos.</p>
                        <ul class="list-disc list-inside">
                            <li><strong>Benefícios:</strong> Ajuda a visualizar o conhecimento, melhora a compreensão, facilita a revisão e estimula a memória visual.</li>
                        </ul>
                        <p class="italic text-slate-600 border-l-4 border-sky-400 pl-4 py-2 my-4 rounded-md">
                            <strong>Exemplo Prático:</strong> Para entender conceitos complexos de programação orientada a objetos, eu desenhava um mapa mental. No centro, "POO". Ramos para "Encapsulamento", "Herança", "Polimorfismo". De "Encapsulamento", puxava para "Classes", "Atributos", "Métodos". Usava cores diferentes para cada pilar, o que me ajudava a ver as conexões e a organizar a informação na minha mente.
                        </p>
                        <p class="text-sm text-slate-500 mt-2">
                            <strong>Estudo de Apoio:</strong> A eficácia dos mapas mentais na aprendizagem visual é amplamente reconhecida. Veja um estudo sobre o tema: <a href="https://revistas.uece.br/index.php/redufor/article/view/13292" target="_blank" rel="noopener noreferrer" class="font-semibold text-sky-500 hover:text-sky-600">Pesquisa</a>.
                        </p>
                        <!-- Quiz for the Mind Maps section -->
                        <div id="quiz-mapasMentais-section" class="quiz-section bg-amber-50 p-6 rounded-lg my-8 shadow-inner border-amber-100" role="group" aria-labelledby="quiz-mapasMentais-title">
                            <h4 id="quiz-mapasMentais-title" class="text-xl font-bold mb-4 text-blue-700">Teste os seus conhecimentos sobre Mapas Mentais!</h4>
                            <p id="quiz-mapasMentais-counter" class="text-sm text-slate-500 mb-4 text-center" aria-live="polite" aria-atomic="true"></p>
                            <div id="quiz-mapasMentais-questions-container" role="region" aria-live="polite"></div>
                            <div class="flex justify-between mt-4">
                                <button id="quiz-mapasMentais-prev" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition duration-300" disabled aria-label="Pergunta Anterior">
                                    <i data-feather="arrow-left" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Anterior
                                </button>
                                <button id="quiz-mapasMentais-next" class="bg-sky-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-700 transition duration-300" aria-label="Próxima Pergunta">
                                    <i data-feather="arrow-right" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Próxima
                                </button>
                                <button id="quiz-mapasMentais-submit-final" class="bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-emerald-700 transition duration-300 hidden" aria-label="Ver Resultados do Quiz">
                                    <i data-feather="check-circle" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Ver Resultados
                                </button>
                            </div>
                            <div id="quiz-mapasMentais-result" class="mt-4 text-center font-semibold" aria-live="polite"></div>
                            <button id="quiz-mapasMentais-retry" class="mt-4 bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 hidden mx-auto block" aria-label="Tentar Novamente o Quiz">
                                <i data-feather="refresh-ccw" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Tentar Novamente
                            </button>
                        </div>

                        <h4 id="tecnica-feynman">1.5. Técnica Feynman: Simplifique para Aprender</h4>
                        <p><strong>Como funciona:</strong> Escolha um conceito e tente explicá-lo em voz alta como se fosse para uma criança de 8 anos, usando linguagem simples. Identifique suas lacunas na compreensão e volte ao material para preencê-las.</p>
                        <ul class="list-disc list-inside">
                            <li><strong>Benefícios:</strong> Revela falhas na compreensão, promove o aprendizado ativo e consolida o conhecimento.</li>
                        </ul>
                        <p class="italic text-slate-600 border-l-4 border-sky-400 pl-4 py-2 my-4 rounded-md">
                            <strong>Exemplo Prático:</strong> Em química, quando eu tinha dificuldade em entender a Lei de Hess, eu imaginava que estava explicando para o meu sobrinho. Começava com "Imagine que você quer ir de casa para a escola. Você pode ir direto, ou pode passar na padaria e depois na casa do amigo. O caminho total é o mesmo, a energia é igual!". Se eu travava, era sinal de que precisava rever a teoria.
                        </p>
                        <p class="text-sm text-slate-500 mt-2">
                            <strong>Estudo de Apoio:</strong> A Técnica Feynman é uma forma poderosa de metaconsciência. Saiba mais: <a href="https://napratica.org.br/aprenda-rapido-com-tecnica-feynman/" target="_blank" rel="noopener noreferrer" class="font-semibold text-sky-500 hover:text-sky-600">Artigo sobre Metacognição e Feynman</a>.
                        </p>
                        <!-- Quiz for the Feynman Technique section -->
                        <div id="quiz-tecnicaFeynman-section" class="quiz-section bg-amber-50 p-6 rounded-lg my-8 shadow-inner border-amber-100" role="group" aria-labelledby="quiz-tecnicaFeynman-title">
                            <h4 id="quiz-tecnicaFeynman-title" class="text-xl font-bold mb-4 text-blue-700">Teste os seus conhecimentos sobre a Técnica Feynman!</h4>
                            <p id="quiz-tecnicaFeynman-counter" class="text-sm text-slate-500 mb-4 text-center" aria-live="polite" aria-atomic="true"></p>
                            <div id="quiz-tecnicaFeynman-questions-container" role="region" aria-live="polite"></div>
                            <div class="flex justify-between mt-4">
                                <button id="quiz-tecnicaFeynman-prev" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition duration-300" disabled aria-label="Pergunta Anterior">
                                    <i data-feather="arrow-left" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Anterior
                                </button>
                                <button id="quiz-tecnicaFeynman-next" class="bg-sky-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-700 transition duration-300" aria-label="Próxima Pergunta">
                                    <i data-feather="arrow-right" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Próxima
                                </button>
                                <button id="quiz-tecnicaFeynman-submit-final" class="bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-emerald-700 transition duration-300 hidden" aria-label="Ver Resultados do Quiz">
                                    <i data-feather="check-circle" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Ver Resultados
                                </button>
                            </div>
                            <div id="quiz-tecnicaFeynman-result" class="mt-4 text-center font-semibold" aria-live="polite"></div>
                            <button id="quiz-tecnicaFeynman-retry" class="mt-4 bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 hidden mx-auto block" aria-label="Tentar Novamente o Quiz">
                                <i data-feather="refresh-ccw" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Tentar Novamente
                            </button>
                        </div>
                        
                        <hr class="my-10 border-t-2 border-slate-200">

                        <!-- New Section: AI Study Question Generator -->
                        <h3 id="gerador-questoes">2. Gerador de Questões de Estudo com IA</h3>
                        <p>Esta ferramenta utiliza inteligência artificial para ajudá-lo a criar questões de estudo personalizadas a partir de qualquer texto. Basta colar o conteúdo de uma aula, um capítulo de livro ou anotações, e a IA irá gerar perguntas que pode usar para testar o seu conhecimento e aprofundar a sua compreensão. É uma forma eficaz de aplicar a técnica de "recuperação ativa" de forma rápida e conveniente!</p>

                        <div class="bg-indigo-50 p-6 rounded-lg my-8 shadow-inner border border-indigo-200" role="region" aria-labelledby="generator-title">
                            <h4 id="generator-title" class="text-xl font-bold mb-4 text-indigo-700 flex items-center">
                                <i data-feather="cpu" class="w-6 h-6 mr-3" aria-hidden="true"></i>
                                Gerador de Questões de Estudo ✨
                            </h4>
                            <div class="space-y-4 mb-6">
                                <div>
                                    <label for="study-text-input" class="block text-slate-700 text-sm font-bold mb-2">Cole o texto aqui:</label>
                                    <textarea id="study-text-input" placeholder="Cole o seu texto de estudo aqui para gerar questões..." rows="8" class="w-full px-4 py-2 border border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500" aria-required="true" aria-label="Campo para colar texto de estudo"></textarea>
                                </div>
                                <button id="generate-questions-btn" class="w-full bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-105 shadow-md flex items-center justify-center" aria-label="Gerar Questões a partir do texto">
                                    Gerar Questões ✨
                                    <i data-feather="loader" class="animate-spin ml-2 hidden" id="questions-loader" aria-hidden="true"></i>
                                </button>
                            </div>
                            <div id="generated-questions-output" class="bg-white p-4 rounded-lg border border-indigo-200 min-h-[100px] text-slate-700 leading-relaxed overflow-auto" aria-live="polite" aria-atomic="true" tabindex="0">
                                <p class="text-slate-500 italic">As questões geradas aparecerão aqui.</p>
                            </div>
                            <button id="clear-generated-questions" class="mt-4 bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 transition duration-300 transform hover:scale-105 hidden" aria-label="Limpar Questões Geradas">
                                <i data-feather="trash-2" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Limpar Questões
                            </button>
                        </div>


                        <hr class="my-10 border-t-2 border-slate-200">

                        <!-- Novo Bloco de Anúncio: Notebook para Estudos (Adicionado acima do Planejador de Estudos) -->
                        <div class="my-8 text-center">
                          <a href="https://amzn.to/43LnJeC" target="_blank" rel="noopener noreferrer nofollow" class="inline-block bg-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-purple-700 transition duration-300 transform hover:scale-105 shadow-md" aria-label="Comprar Notebook para Estudos na Amazon">
                            <i data-feather="laptop" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i>
                            Otimize seus estudos com um Notebook!
                          </a>
                        </div>
                        <!-- Fim do Novo Bloco de Anúncio -->
                         
                        <h3 id="planejador-estudos">3. Planejador de Estudos Personalizado com IA</h3>
                        <p>Gerencie sua carga de estudo de forma inteligente! Informe suas disciplinas, prazos e a duração do plano, e nossa IA (via Gemini) irá sugerir um cronograma de estudos otimizado, aplicando princípios de produtividade como a Técnica Pomodoro e a Repetição Espaçada.</p>

                        <div class="bg-green-50 p-6 rounded-lg my-8 shadow-inner border border-green-200" role="region" aria-labelledby="planner-title">
                            <h4 id="planner-title" class="text-xl font-bold mb-4 text-green-700 flex items-center">
                                <i data-feather="calendar" class="w-6 h-6 mr-3" aria-hidden="true"></i>
                                Planejador de Estudos ✨
                            </h4>
                            <div class="space-y-4 mb-6">
                                <div>
                                    <label for="study-plan-subjects" class="block text-slate-700 text-sm font-bold mb-2">Suas Disciplinas/Tópicos (um por linha):</label>
                                    <textarea id="study-plan-subjects" placeholder="Ex: Matemática (Cálculo I)&#10;Português (Gramática)&#10;História (Idade Média)" rows="4" class="w-full px-4 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500" aria-required="true" aria-label="Disciplinas ou tópicos de estudo"></textarea>
                                </div>
                                <div>
                                    <label for="study-plan-deadlines" class="block text-slate-700 text-sm font-bold mb-2">Prazos e Exames (um por linha, com data se possível):</label>
                                    <textarea id="study-plan-deadlines" placeholder="Ex: Exame de Cálculo: 20/07/2025&#10;Trabalho de Gramática: 10/07/2025" rows="3" class="w-full px-4 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500" aria-required="true" aria-label="Prazos e datas de exames"></textarea>
                                </div>
                                <div>
                                    <label for="study-plan-start-date" class="block text-slate-700 text-sm font-bold mb-2">Data de Início do Plano:</label>
                                    <input type="date" id="study-plan-start-date" class="w-full px-4 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500" aria-required="true" aria-label="Data de início do plano de estudos">
                                </div>
                                <div>
                                    <label for="study-plan-duration" class="block text-slate-700 text-sm font-bold mb-2">Duração do Plano (em dias):</label>
                                    <input type="number" id="study-plan-duration" value="7" min="1" max="30" class="w-full px-4 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500" aria-required="true" aria-label="Duração do plano de estudos em dias">
                                </div>
                                <!-- New input for study intensity -->
                                <div>
                                    <label for="study-plan-intensity" class="block text-slate-700 text-sm font-bold mb-2">Intensidade de Estudo Diária:</label>
                                    <select id="study-plan-intensity" class="w-full px-4 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500" aria-label="Intensidade de estudo diária">
                                        <option value="moderada">Moderada</option>
                                        <option value="leve">Leve</option>
                                        <option value="intensa">Intensa</option>
                                    </select>
                                </div>
                                <!-- New input for preferred study times -->
                                <div>
                                    <label for="study-plan-preferred-times" class="block text-slate-700 text-sm font-bold mb-2">Períodos Preferenciais para Estudo (ex: manhã, tarde, noite, fins de semana):</label>
                                    <input type="text" id="study-plan-preferred-times" placeholder="Ex: manhã, tarde, fins de semana" class="w-full px-4 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500" aria-label="Períodos preferenciais para estudo">
                                </div>
                                <button id="generate-study-plan-btn" class="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition duration-300 transform hover:scale-105 shadow-md flex items-center justify-center" aria-label="Gerar Plano de Estudos">
                                    Gerar Plano ✨
                                    <i data-feather="loader" class="animate-spin ml-2 hidden" id="study-plan-loader" aria-hidden="true"></i>
                                </button>
                            </div>
                            <div id="generated-study-plan-output" class="bg-white p-4 rounded-lg border border-green-200 min-h-[100px] text-slate-700 leading-relaxed overflow-auto" aria-live="polite" aria-atomic="true" tabindex="0">
                                <p class="text-slate-500 italic">O seu plano de estudos gerado aparecerá aqui.</p>
                            </div>
                            <button id="clear-study-plan" class="mt-4 bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 transition duration-300 transform hover:scale-105 hidden" aria-label="Limpar Plano de Estudos">
                                <i data-feather="trash-2" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i> Limpar Plano
                                </button>
                            </div>

                        <hr class="my-10 border-t-2 border-slate-200">

                        <h3 id="superando-procrastinacao">4. Superando a Procrastinação na Universidade</h3>
                        <p>A procrastinação é um dos maiores desafios da vida universitária. Muitos estudantes lutam para manter o foco e evitar adiar tarefas importantes. No entanto, existem estratégias eficazes para combater a procrastinação e aumentar a sua produtividade.</p>
                        <p>Identifique as causas da sua procrastinação. É medo de falhar? Perfeccionismo? Falta de interesse na tarefa? Compreender a raiz do problema é o primeiro passo para superá-lo.</p>
                        <p>Divida grandes tarefas em passos menores e mais gerenciáveis. Comece com o mais fácil para ganhar embalagem e sentir-se motivado. Use a técnica Pomodoro, como discutido anteriormente, para manter o foco em blocos curtos e recompensar-se nas pausas.</p>
                        <p>Crie um ambiente de estudo livre de distrações. Desligue as notificações do telemóvel, feche abas desnecessárias no navegador e organize o seu espaço de trabalho. A disciplina começa com a criação de um ambiente propício ao estudo.</p>

                        <hr class="my-10 border-t-2 border-slate-200">
                        
                        <!-- REMOVIDO: Bloco de Anúncio 2: Exemplo de anúncio entre seções do artigo (este foi removido conforme solicitação) -->

                        <!-- New Section: Gestão de Anotações e Organização -->
                        <h3 id="organizacao-anotacoes">5. Gestão de Anotações e Organização</h3>
                        <p>A forma como organiza as suas anotações e materiais de estudo tem um impacto direto na sua capacidade de reter informações e aceder a elas rapidamente. Um sistema de organização eficiente pode poupar-lhe tempo e reduzir o estresse na altura dos exames.</p>
                        <h4 id="tecnicas-anotacao">5.1. Técnicas de Anotação Eficazes</h4>
                        <ul class="list-disc list-inside">
                            <li><strong>Método Cornell:</strong> Divida a página em três secções: notas principais, pistas/palavras-chave e um resumo na parte inferior. Isso facilita a revisão e a recuperação ativa.</li>
                            <li><strong>Mapeamento:</strong> Ideal para visualizar relações entre ideias, similar a mapas mentais, mas focado na hierarquia de anotações.</li>
                            <li><strong>Anotações Lineares:</strong> O método tradicional de bullet points ou frases curtas, útil para conteúdos sequenciais.</li>
                            <li><strong>Esquemas:</strong> Use hierarquias e indentação para organizar informações, destacando pontos principais e sub-pontos.</li>
                        </ul>
                        <p class="italic text-slate-600 border-l-4 border-sky-400 pl-4 py-2 my-4 rounded-md">
                            <strong>Exemplo Prático:</strong> Em aulas de história, com muitos eventos e datas, eu usava o Método Cornell. Na coluna principal, anotava os pontos da aula. Na coluna de pistas, escrevia datas ou nomes de figuras. No final, um resumo do que foi aprendido. Na revisão, cobria a coluna principal e tentava lembrar o conteúdo pelas pistas.
                        </p>

                        <h4 id="organizacao-digital">5.2. Organização Digital de Materiais</h4>
                        <p>Aproveite as ferramentas digitais para manter os seus materiais organizados e acessíveis de qualquer lugar.</p>
                        <ul class="list-disc list-inside">
                            <li><strong>Pastas Estruturadas:</strong> Crie uma hierarquia de pastas claras no seu computador ou na nuvem (e.g., Disciplina > Semestre > Tópico > Material).</li>
                            <li><strong>Ferramentas de Nuvem:</strong> Use Google Drive, OneDrive ou Dropbox para guardar documentos, partilhar com colegas e aceder em múltiplos dispositivos.</li>
                            <li><strong>Aplicativos de Notas:</strong> O Notion, OneNote, Evernote ou Simplenote são ótimos para organizar anotações, PDFs, imagens e links, com recursos de busca e tags.</li>
                            <li><strong>Backup Regular:</strong> Certifique-se de fazer backups regulares dos seus arquivos importantes para evitar perdas.</li>
                        </ul>
                        <p class="italic text-slate-600 border-l-4 border-sky-400 pl-4 py-2 my-4 rounded-md">
                            <strong>Exemplo Prático:</strong> Para um projeto de grupo, usávamos o Google Drive. Cada membro tinha uma pasta para as suas contribuições, e havia uma pasta central para o documento final. Isso evitava a confusão de versões e garantia que todos trabalhavam no material mais recente.
                        </p>
                        
                        <hr class="my-10 border-t-2 border-slate-200">

                        <!-- Content Expansion and Personalization (Now section 6) -->
                        <h3 id="expansao-personalizacao">6. Expansão e Personalização do Conteúdo</h3>
                        <p>O guia já aborda métodos de estudo, mas a vida universitária é mais do que isso. Esta seção expande o conteúdo para incluir aspetos cruciais da vida académica e pessoal, oferecendo recursos adicionais para uma jornada universitária completa e bem-sucedida.</p>

                        <h4 id="gestao-tempo-produtividade">6.1. Gestão de Tempo e Produtividade</h4>
                        <p>Além da Técnica Pomodoro, existem outros métodos poderosos para gerir o seu tempo e maximizar a sua produtividade.</p>
                        <ul class="list-disc list-inside">
                            <li><strong>Matriz de Eisenhower:</strong> Classifique as tarefas em quatro categorias (Urgente/Importante, Não Urgente/Importante, Urgente/Não Importante, Não Urgente/Não Importante) para priorizar o que realmente importa.</li>
                            <li><strong>Regra 80/20 (Princípio de Pareto):</strong> Concentre-se nos 20% das tarefas que trarão 80% dos resultados. Identifique as atividades mais impactantes para o seu estudo e foque-se nelas.</li>
                            <li><strong>Bloqueio de Tempo:</strong> Agende blocos específicos de tempo no seu calendário para tarefas dedicadas, como estudar para uma disciplina específica, fazer exercícios ou trabalhar num projeto.</li>
                        </ul>
                        <p class="italic text-slate-600 border-l-4 border-sky-400 pl-4 py-2 my-4 rounded-md">
                            <strong>Exemplo Prático:</strong> Ao lidar com múltiplos projetos e exames, usei a Matriz de Eisenhower. Tarefas como "revisar para o exame final de Cálculo" eram urgentes e importantes. "Responder e-mails não essenciais" era não urgente e não importante. Isso ajudou-me a dizer "não" a distrações e a focar-me no que realmente impulsionava os meus resultados.
                        </p>

                        <h4 id="reducao-estresse-bem-estar">6.2. Redução de Estresse e Bem-Estar</h4>
                        <p>A pressão académica pode ser intensa, mas cuidar do seu bem-estar é fundamental para a sua saúde e desempenho a longo prazo.</p>
                        <ul class="list-disc list-inside">
                            <li><strong>Mindfulness e Meditação:</strong> Práticas de atenção plena podem ajudar a reduzir a ansiedade, melhorar o foco e promover a calma. Mesmo 5 a 10 minutos por dia podem fazer a diferença.</li>
                            <li><strong>Exercício Físico Regular:</strong> A atividade física é um poderoso aliviador de estresse. Caminhadas, corridas, natação ou ioga podem melhorar o humor e a clareza mental.</li>
                            <li><strong>Sono de Qualidade:</strong> Priorize 7-9 horas de sono por noite. A privação de sono afeta a concentração, a memória e a capacidade de resolução de problemas.</li>
                            <li><strong>Conexões Sociais:</strong> Mantenha contato com amigos e familiares. O suporte social é vital para o bem-estar emocional.</li>
                        </ul>
                        <p class="italic text-slate-600 border-l-4 border-sky-400 pl-4 py-2 my-4 rounded-md">
                            <strong>Exemplo Prático:</strong> Durante a época de teses, eu sentia um enorme peso. Comecei a incorporar caminhadas diárias de 30 minutos e 10 minutos de meditação antes de dormir. A qualidade do meu sono melhorou, e eu conseguia abordar o trabalho com uma mente mais clara e menos ansiosa.
                        </p>

                        <h4 id="habilidades-escrita-academica">6.3. Habilidades de Escrita Acadêmica</h4>
                        <p>Escrever de forma clara e rigorosa é uma habilidade indispensável na universidade. Dominar a estrutura e as regras de citação é crucial.</p>
                        <ul class="list-disc list-inside">
                            <li><strong>Estrutura de Trabalhos:</strong> Compreenda a estrutura de introdução, desenvolvimento e conclusão. Saiba como organizar parágrafos, usar transições eficazes e construir um argumento lógico.</li>
                            <li><strong>Citações e Referências:</strong> Aprenda as normas de citação da sua área (ex: APA, ABNT, MLA, Chicago). Citando corretamente, evita o plágio e dá crédito aos autores originais.</li>
                            <li><strong>Evitar o Plágio:</strong> Entenda o que constitui plágio e como parafrasear e resumir informações de forma ética.</li>
                            <li><strong>Revisão e Edição:</strong> Revise o seu trabalho várias vezes. Peça a colegas para lerem e darem feedback. Verifique a gramática, ortografia, clareza e coerência.</li>
                        </ul>

                        <h4 id="preparacao-apresentacoes">6.4. Preparação para Apresentações</h4>
                        <p>Apresentar projetos e seminários é uma parte comum da vida universitária. Preparar-se adequadamente pode fazer toda a diferença.</p>
                        <ul class="list-disc list-inside">
                            <li><strong>Estrutura da Apresentação:</strong> Comece com uma introdução envolvente, desenvolva os pontos principais de forma lógica e finalize com uma conclusão forte e um call to action (se aplicável).</li>
                            <li><strong>Design de Slides Eficaz:</strong> Use um design limpo e profissional. Evite muito texto nos slides; use palavras-chave, imagens e gráficos.</li>
                            <li><strong>Prática de Oratória:</strong> Pratique a sua apresentação em voz alta várias vezes. Cronometre-se. Peça feedback a amigos ou colegas.</li>
                            <li><strong>Controle do Nervosismo:</strong> Técnicas de respiração, visualização positiva e a prática exaustiva podem ajudar a reduzir o nervosismo.</li>
                        </ul>

                        <h4 id="recursos-adicionais">6.5. Recursos Adicionais</h4>
                        <p>Para complementar os seus estudos, explore estes recursos práticos.</p>
                        <ul class="list-disc list-inside">
                            <!-- Removed "Biblioteca de Modelos" section as requested -->
                            <li><strong>Lista de Ferramentas Recomendadas:</strong>
                                <ul class="list-circle list-inside ml-5">
                                    <li><strong>Notion:</strong> Para organização de notas, projetos e bases de dados pessoais (<a href="https://www.notion.so/" target="_blank" rel="noopener noreferrer" class="font-semibold text-sky-500 hover:text-sky-600">Site Oficial</a>).</li>
                                    <li><strong>Grammarly:</strong> Assistente de escrita para correção gramatical e estilística (<a href="https://www.grammarly.com/" target="_blank" rel="noopener noreferrer" class="font-semibold text-sky-500 hover:text-sky-600">Site Oficial</a>).</li>
                                    <li><strong>Mendeley/Zotero:</strong> Gerenciadores de referências para artigos científicos (<a href="https://www.mendeley.com/" target="_blank" rel="noopener noreferrer" class="font-semibold text-sky-500 hover:text-sky-600">Mendeley</a>, <a href="https://www.zotero.org/" target="_blank" rel="noopener noreferrer" class="font-semibold text-sky-500 hover:text-sky-600">Zotero</a>).</li>
                                    <li><strong>Forest:</strong> Aplicativo de produtividade que ajuda a manter o foco plantando uma árvore virtual enquanto você estuda (<a href="https://www.forestapp.cc/" target="_blank" rel="noopener noreferrer" class="font-semibold text-sky-500 hover:text-sky-600">Site Oficial</a>).</li>
                                </ul>
                            </li>
                        </ul>

                        <hr class="my-10 border-t-2 border-slate-200">
                        <h3 id="equilibrio-vida-academica">7. Equilíbrio Vida Acadêmica e Pessoal: É Possível!</h3>
                        <p>A vida universitária pode ser avassaladora, com uma grande carga de estudos, trabalhos e exames. Manter o equilíbrio entre as responsabilidades acadêmicas e a vida pessoal é crucial para o bem-estar e o sucesso a longo prazo. É possível ter sucesso na universidade sem sacrificar a sua saúde mental e física.</p>
                        <p>Priorize o sono. Uma boa noite de descanso é essencial para a concentração e o aprendizado. Estabeleça horários para exercícios físicos e alimentação saudável, pois o corpo e a mente estão interligados. Reserve tempo para hobbies e atividades de lazer que o ajudem a relaxar e recarregar as energias.</p>
                        <p>Não tenha medo de dizer "não". É importante aprender a gerir o seu tempo e as suas prioridades, mesmo que isso signifique recusar convites ou compromissos. Peça ajuda quando precisar, seja a amigos, familiares, professores ou serviços de apoio universitário. Lembre-se, o seu bem-estar é tão importante quanto o seu desempenho académico.</p>
                    </div>
                </article>
            </div>

            <!-- Sidebar (right column for additional content) -->
            <div class="w-full lg:w-1/3 space-y-12">

                <!-- Popular Articles (highlighted section) -->
                <section class="bg-white p-8 rounded-2xl shadow-md border border-slate-200" aria-labelledby="popular-articles-title">
                    <h3 id="popular-articles-title" class="text-2xl font-bold text-slate-700 mb-6 flex items-center">
                        <i data-feather="bookmark" class="w-7 h-7 mr-3 text-amber-500" aria-hidden="true"></i>
                        Artigos Populares
                    </h3>
                    <ul class="space-y-4">
                        <li>
                            <a href="#gerador-questoes" class="block text-lg text-sky-600 hover:text-sky-800 font-semibold transition duration-300 scroll-link">
                                Gerador de Questões de Estudo ✨
                            </a>
                            <p class="text-sm text-slate-500 mt-1">Crie questões personalizadas a partir do seu texto.</p>
                        </li>
                        <li>
                            <a href="#planejador-estudos" class="block text-lg text-sky-600 hover:text-sky-800 font-semibold transition duration-300 scroll-link">
                                Planejador de Estudos Personalizado ✨
                            </a>
                            <p class="text-sm text-slate-500 mt-1">Gere um plano de estudos otimizado com base em suas necessidades.</p>
                        </li>
                        <li>
                            <a href="#superando-procrastinacao" class="block text-lg text-sky-600 hover:text-sky-800 font-semibold transition duration-300 scroll-link">
                                Superando a Procrastinação na Universidade
                            </a>
                            <p class="text-sm text-slate-500 mt-1">Dicas práticas para manter o foco e evitar a temida procrastinação.</p>
                        </li>
                        <li>
                            <a href="#organizacao-anotacoes" class="block text-lg text-sky-600 hover:text-sky-800 font-semibold transition duration-300 scroll-link">
                                Gestão de Anotações e Organização
                            </a>
                            <p class="text-sm text-slate-500 mt-1">Descubra técnicas para organizar suas anotações e materiais de estudo.</p>
                        </li>
                        <li>
                            <a href="#expansao-personalizacao" class="block text-lg text-sky-600 hover:text-sky-800 font-semibold transition duration-300 scroll-link">
                                Expansão e Personalização do Conteúdo
                            </a>
                            <p class="text-sm text-slate-500 mt-1">Descubra novos métodos de gestão de tempo, bem-estar e habilidades académicas.</p>
                        </li>
                        <li>
                            <a href="#equilibrio-vida-academica" class="block text-lg text-sky-600 hover:text-sky-800 font-semibold transition duration-300 scroll-link">
                                Equilíbrio Vida Acadêmica e Pessoal: É Possível!
                            </a>
                            <p class="text-sm text-slate-500 mt-1">Descubra como conciliar estudos, trabalho e lazer sem surtar.</p>
                        </li>
                    </ul>
                </section>

                <!-- Newsletter Section (for guide download) -->
                <section id="newsletter-section" class="bg-blue-50 p-8 rounded-2xl shadow-md border border-blue-200" aria-labelledby="newsletter-title">
                    <h3 id="newsletter-title" class="text-2xl font-bold text-blue-700 mb-4 flex items-center">
                        <i data-feather="mail" class="w-7 h-7 mr-3 text-blue-500" aria-hidden="true"></i>
                        Receba o nosso Guia Gratuito!
                    </h3>
                    <p class="text-slate-700 mb-6">Inscreva-se para receber o guia completo "DescomplicaAcadêmico" e dicas exclusivas para turbinar os seus estudos!</p>
                    <form id="newsletter-form" class="space-y-4" aria-label="Formulário de Inscrição na Newsletter">
                        <div>
                            <label for="email" class="sr-only">O seu Email</label>
                            <input type="email" id="email" name="email" placeholder="O seu melhor email" required
                                class="w-full px-4 py-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
                                autocomplete="email" aria-required="true">
                        </div>
                        <button type="submit"
                            class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-300 transform hover:scale-105 shadow-md">
                            <i data-feather="send" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i>
                            Quero o Guia!
                        </button>
                    </form>
                </section>

                <!-- Bloco de Anúncio: Luminária de Mesa Ajustável (MOVIDO PARA A BARRA LATERAL) -->
                <div class="my-8 bg-blue-50 p-4 rounded-lg border border-blue-200 text-center shadow-md">
                    <p class="text-sm mb-2 text-blue-700 font-semibold">Iluminação ideal para o seu espaço de estudo!</p>
                    <a href="https://www.amazon.com.br/Lumin%C3%A1ria-Mesa-Ajust%C3%A1vel-Porta-Caneta/dp/B0F88M5KPP?__mk_pt_BR=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=Y9XK1I0GW238&dib=eyJ2IjoiMSJ9.FaVIPusNv6XmREXSBR7doNe7wq0KXGxksuhrReVYKyFUR_JagNuyZkFe7luFLDqFXek2K4RGDWBoCmu9czt9sZYA69UWrBIMX9N9TEpESIk.gUeNKyJ6-Z7DQAsJ8xc9DcKRB0r3qUET4wTRka_y9gQ&dib_tag=se&keywords=Lumin%C3%A1rias+LED+com+ajuste+de+temperatura+de+cor+e+intensidade.&qid=1749912132&sprefix=lumin%C3%A1rias+led+com+ajuste+de+temperatura+de+cor+e+intensidade+%2Caps%2C196&sr=8-97-spons&ufe=app_do%3Aamzn1.fos.6d798eae-cadf-45de-946a-f477d47705b9&xpid=uFwsq_G7bFnGM&sp_csd=d2lkZ2V0TmFtZT1zcF9hdGZfbmV4dA&psc=1&linkCode=ll1&tag=descompli073a-20&linkId=c46fba64ad66cbfd476d4baffc3cf5c1&language=pt_BR&ref_=as_li_ss_tl" target="_blank" rel="nofollow noopener" aria-label="Comprar Luminária de Mesa Ajustável com Porta-Caneta na Amazon">
                        <img src="https://m.media-amazon.com/images/I/61gR5i4d7AL._AC_SL1500_.jpg" alt="Luminária de Mesa LED Ajustável com Porta-Caneta" class="w-full h-auto block mx-auto rounded-lg mb-3" onerror="this.onerror=null;this.src='https://placehold.co/1500x1500/38bdf8/ffffff?text=Lumin%C3%A1ria+N%C3%A3o+Dispon%C3%ADvel';">
                        <p class="text-sm text-slate-800 font-semibold mb-1">Luminária de Mesa LED Ajustável com Porta-Caneta</p>
                        <p class="text-xs text-blue-600">Com três modos de cor e intensidade, perfeita para estudar.</p>
                    </a>
                </div>
                <!-- Fim do Bloco de Anúncio MOVIDO -->

            </div>
        </div>

        <!-- Frequently Asked Questions (FAQ) Section -->
        <section id="faq-section" class="mt-12 bg-white p-8 rounded-2xl shadow-md" aria-labelledby="faq-main-title">
            <h2 id="faq-main-title" class="text-3xl font-bold text-slate-800 mb-8 text-center flex items-center justify-center">
                <i data-feather="help-circle" class="w-9 h-9 mr-4 text-sky-500" aria-hidden="true"></i>
                Perguntas Frequentes
            </h2>
            <div class="space-y-4">
                <!-- FAQ Item 1 -->
                <div class="accordion-item">
                    <div class="accordion-header" role="button" aria-expanded="false" aria-controls="faq-content-1" tabindex="0">
                        Qual é o principal objetivo do DescomplicaAcadêmico?
                        <i data-feather="chevron-down" class="w-6 h-6" aria-hidden="true"></i>
                    </div>
                    <div id="faq-content-1" class="accordion-content" role="region" aria-labelledby="faq-header-1">
                        <p>Nosso objetivo é fornecer guias e ferramentas para ajudar estudantes universitários a otimizar seus estudos, gerenciar o tempo, reduzir o estresse e alcançar o sucesso acadêmico de forma mais eficiente e prazerosa.</p>
                    </div>
                </div>

                <!-- FAQ Item 2 -->
                <div class="accordion-item">
                    <div class="accordion-header" role="button" aria-expanded="false" aria-controls="faq-content-2" tabindex="0">
                        A Técnica Pomodoro é realmente eficaz?
                        <i data-feather="chevron-down" class="w-6 h-6" aria-hidden="true"></i>
                    </div>
                    <div id="faq-content-2" class="accordion-content" role="region" aria-labelledby="faq-header-2">
                        <p>Sim! A Técnica Pomodoro é amplamente reconhecida e estudada por sua eficácia em melhorar o foco e a produtividade. Ao dividir o trabalho em blocos focados com pausas curtas, ela ajuda a manter a concentração e a evitar o esgotamento.</p>
                    </div>
                </div>

                <!-- FAQ Item 3 -->
                <div class="accordion-item">
                    <div class="accordion-header" role="button" aria-expanded="false" aria-controls="faq-content-3" tabindex="0">
                        Preciso pagar para usar os recursos?
                        <i data-feather="chevron-down" class="w-6 h-6" aria-hidden="true"></i>
                    </div>
                    <div id="faq-content-3" class="accordion-content" role="region" aria-labelledby="faq-header-3">
                        <p>O "Guia Definitivo para o Sucesso Universitário" e muitos dos nossos artigos e dicas são totalmente gratuitos. Futuramente, poderemos oferecer recursos premium, mas o conteúdo base será sempre acessível para todos.</p>
                    </div>
                </div>

                <!-- FAQ Item 4 -->
                <div class="accordion-item">
                    <div class="accordion-header" role="button" aria-expanded="false" aria-controls="faq-content-4" tabindex="0">
                        Como posso entrar em contacto para sugestões ou dúvidas?
                        <i data-feather="message-circle" class="w-6 h-6" aria-hidden="true"></i>
                    </div>
                    <div id="faq-content-4" class="accordion-content" role="region" aria-labelledby="faq-header-4">
                        <p>Você pode entrar em contato connosco através da seção de "Contato" no menu superior, preenchendo o formulário ou enviando um email para <a href="mailto:contato@descomplicaacademico.com" class="text-sky-500 hover:text-sky-600">contato@descomplicaacademico.com</a>. Estamos sempre abertos a feedback!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="sobre" class="mt-12 bg-white p-8 rounded-2xl shadow-md" aria-labelledby="about-title">
            <h2 id="about-title" class="text-3xl font-bold text-slate-800 mb-8 text-center flex items-center justify-center">
                <i data-feather="info" class="w-9 h-9 mr-4 text-emerald-500" aria-hidden="true"></i>
                Sobre o DescomplicaAcadêmico
            </h2>
            <div class="prose max-w-none text-slate-700 leading-relaxed text-center">
                <p>O <strong>DescomplicaAcadêmico</strong> nasceu da necessidade de desmistificar a vida universitária e torná-la mais produtiva e menos estressante. Acreditamos que com as ferramentas e estratégias certas, qualquer estudante pode não apenas sobreviver, mas realmente prosperar na sua jornada académica.</p>
                <p>A nossa equipa é composta por ex-alunos e educadores que vivenciaram os desafios da universidade e agora partilham o conhecimento acumulado para ajudar as novas gerações. Estamos empenhados em trazer conteúdo de qualidade, baseado em métodos comprovados e experiências reais.</p>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contato" class="mt-12 bg-white p-8 rounded-2xl shadow-md" aria-labelledby="contact-title">
            <h2 id="contact-title" class="text-3xl font-bold text-slate-800 mb-8 text-center flex items-center justify-center">
                <i data-feather="send" class="w-9 h-9 mr-4 text-purple-500" aria-hidden="true"></i>
                Entre em Contacto
            </h2>
            <form id="contact-form" class="max-w-xl mx-auto space-y-6" aria-label="Formulário de Contacto">
                <div>
                    <label for="name" class="block text-slate-700 text-sm font-bold mb-2">Nome Completo</label>
                    <input type="text" id="name" name="name" placeholder="O seu nome" required
                        class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200"
                        aria-required="true">
                </div>
                <div>
                    <label for="email-contact" class="block text-slate-700 text-sm font-bold mb-2">Email</label>
                    <input type="email" id="email-contact" name="email" placeholder="o seu email@exemplo.com" required
                        class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200"
                        autocomplete="email" aria-required="true">
                </div>
                <div>
                    <label for="message" class="block text-slate-700 text-sm font-bold mb-2">Mensagem</label>
                    <textarea id="message" name="message" rows="5" placeholder="A sua mensagem..." required
                        class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200" aria-required="true"></textarea>
                </div>
                <button type="submit"
                    class="w-full bg-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-purple-700 transition duration-300 transform hover:scale-105 shadow-md">
                    <i data-feather="send" class="w-5 h-5 inline-block mr-2" aria-hidden="true"></i>
                    Enviar Mensagem
                </button>
            </form>
            <!-- Confirmation/Error Message for Contact Form (hidden by default, with ARIA accessibility) -->
            <div id="contact-form-feedback" class="mt-4 hidden px-4 py-3 rounded-lg text-center" role="status" aria-live="polite"></div>
        </section>
    </main>

    <!-- Floating Social Share Buttons (with ARIA accessibility) -->
    <div class="social-share-buttons" role="group" aria-label="Partilhar nas Redes Sociais">
        <a href="https://twitter.com/intent/tweet?url=https://yourwebsite.com&text=Confira%20este%20guia%20incr%C3%ADvel%20para%20o%20sucesso%20universit%C3%A1rio!" target="_blank" rel="noopener noreferrer" aria-label="Partilhar no Twitter" class="twitter">
            <i data-feather="twitter" class="w-6 h-6" aria-hidden="true"></i>
        </a>
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://yourwebsite.com&title=DescomplicaAcad%C3%AAmico&summary=O%20Seu%20Guia%20Completo%20para%20o%20Sucesso%20Universit%C3%A1rio&source=yourwebsite.com" target="_blank" rel="noopener noreferrer" aria-label="Partilhar no LinkedIn" class="linkedin">
            <i data-feather="linkedin" class="w-6 h-6" aria-hidden="true"></i>
        </a>
        <!-- Add more buttons as needed -->
    </div>

    <!-- "Back to Top" Button (with ARIA accessibility) -->
    <button id="back-to-top" aria-label="Voltar ao topo da página">
        <i data-feather="arrow-up" class="w-6 h-6" aria-hidden="true"></i>
    </button>

    <!-- Footer -->
    <footer class="bg-slate-800 text-slate-300 py-8 mt-12 rounded-t-2xl">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 DescomplicaAcadêmico. Todos os direitos reservados.</p>
            <p class="text-sm mt-2">Feito com <i data-feather="heart" class="inline-block w-4 h-4 text-red-500" aria-hidden="true"></i> para estudantes.</p>
            <!-- Bloco de Anúncio no Rodapé -->
            <div class="mt-6 p-4 bg-slate-700 text-slate-400 rounded-lg border border-slate-600 text-center">
                <p class="text-xs mb-2">Anúncio Discreto (Google AdSense)</p>
                <!-- SEU CÓDIGO GOOGLE ADSENSE VAI AQUI -->
                <!-- Exemplo:
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-SEU_ID_DO_ADSENSE"
                     crossorigin="anonymous"></script>
                <ins class="adsbygoogle"
                     style="display:block; text-align:center;"
                     data-ad-layout="in-article"
                     data-ad-format="fluid"
                     data-ad-client="ca-pub-SEU_ID_DO_ADSENSE"
                     data-ad-slot="SEU_SLOT_DO_RODAPE"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
                -->
                <p class="text-xs text-slate-500">Este é um placeholder. O código real do AdSense será fornecido após a aprovação da sua conta.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', initApp);

        /**
         * Initializes the entire application by setting up various components and features.
         */
        function initApp() {
            feather.replace(); // Initialize Feather icons

            setupNavigation();
            setupBackToTopButton();
            setupProgressBar();
            setupAccordions();
            setupNewsletterForm();
            setupContactForm();

            // Initialize Quiz Managers for each quiz
            const quizIds = ['pomodoro', 'estudoAtivo', 'repeticaoEspacada', 'mapasMentais', 'tecnicaFeynman'];
            quizIds.forEach(id => {
                new QuizManager(id).init();
            });

            // Initialize Flashcard Manager
            new FlashcardManager().init();

            // Initialize Question Generator
            new QuestionGenerator().init();

            // Initialize Study Planner
            new StudyPlanner().init();

            // Initialize Pomodoro Timer
            new PomodoroTimer().init();
        }

        /**
         * Displays a temporary message to the user.
         * @param {string} message - The message text.
         * @param {'success'|'error'|'info'} type - The type of message (influences styling).
         * @param {HTMLElement} targetElement - The element after which the message will be inserted.
         */
        function displayMessage(message, type, targetElement) {
            const messageBox = document.createElement('div');
            messageBox.textContent = message;
            messageBox.className = `custom-message ${type}`;

            // Add icon based on message type
            let iconName = '';
            if (type === 'success') {
                iconName = 'check-circle';
            } else if (type === 'error') {
                iconName = 'x-circle';
            } else if (type === 'info') {
                iconName = 'info';
            }

            if (iconName) {
                const icon = document.createElement('i');
                icon.setAttribute('data-feather', iconName);
                icon.setAttribute('aria-hidden', 'true');
                messageBox.prepend(icon); // Add icon before the text
            }

            // Append to body and replace icons
            document.body.appendChild(messageBox);
            feather.replace(); // Re-render Feather icons for the new message box

            // Use animationend to remove the element after the CSS animation completes
            messageBox.addEventListener('animationend', () => {
                messageBox.remove();
            }, { once: true }); // Ensure the event listener is removed after first use
        }

        /**
         * Toggles the loading state of a button and associated loader icon.
         * @param {HTMLButtonElement} buttonElement - The button element.
         * @param {HTMLElement} loaderElement - The loader icon element.
         * @param {boolean} isLoading - True to show loading, false to hide.
         */
        function toggleLoadingState(buttonElement, loaderElement, isLoading) {
            if (isLoading) {
                buttonElement.disabled = true;
                loaderElement.classList.remove('hidden');
            } else {
                buttonElement.disabled = false;
                loaderElement.classList.add('hidden');
            }
        }

        /**
         * Displays a custom confirmation modal.
         * @param {string} title - The title of the confirmation.
         * @param {string} message - The message content.
         * @param {function} onConfirmCallback - Callback function to execute if confirmed.
         */
        function showCustomConfirm(title, message, onConfirmCallback) {
            const confirmationBox = document.createElement('div');
            confirmationBox.className = 'fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-[1002]';
            confirmationBox.innerHTML = `
                <div class="bg-white p-8 rounded-lg shadow-xl text-center max-w-sm mx-4" role="alertdialog" aria-modal="true" aria-labelledby="confirm-title" aria-describedby="confirm-desc">
                    <h5 id="confirm-title" class="text-lg font-semibold mb-4 text-slate-800">${title}</h5>
                    <p id="confirm-desc" class="mb-6 text-slate-600">${message}</p>
                    <div class="flex justify-center space-x-4">
                        <button id="confirm-action" class="bg-red-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-red-700 transition duration-300">Sim</button>
                        <button id="cancel-action" class="bg-gray-300 text-slate-800 font-bold py-2 px-5 rounded-lg hover:bg-gray-400 transition duration-300">Cancelar</button>
                    </div>
                </div>
            `;
            document.body.appendChild(confirmationBox);

            const confirmBtn = document.getElementById('confirm-action');
            const cancelBtn = document.getElementById('cancel-action');

            confirmBtn.focus(); // Focus on confirm button for accessibility

            confirmBtn.addEventListener('click', () => {
                onConfirmCallback();
                confirmationBox.remove();
            });

            cancelBtn.addEventListener('click', () => {
                confirmationBox.remove();
            });
        }


        /**
         * Sets up smooth scrolling for navigation links.
         */
        function setupNavigation() {
            document.querySelectorAll('.scroll-link').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        }

        /**
         * Sets up the "Back to Top" button visibility and functionality.
         */
        function setupBackToTopButton() {
            const backToTopButton = document.getElementById('back-to-top');
            if (!backToTopButton) return;

            const toggleVisibility = () => {
                if (window.scrollY > 300) {
                    backToTopButton.classList.add('show');
                } else {
                    backToTopButton.classList.remove('show');
                }
            };

            window.addEventListener('scroll', toggleVisibility);
            backToTopButton.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            toggleVisibility(); // Initial check on load
        }

        /**
         * Sets up the reading progress bar.
         */
        function setupProgressBar() {
            const readingProgressBar = document.getElementById('reading-progress-bar');
            if (!readingProgressBar) return;

            window.addEventListener('scroll', () => {
                const docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = document.documentElement.scrollTop;
                const percentage = (scrolled / docHeight) * 100;
                readingProgressBar.style.width = percentage + '%';
                readingProgressBar.setAttribute('aria-valuenow', Math.round(percentage));
            });
        }

        /**
         * Sets up accordion (FAQ) functionality.
         */
        function setupAccordions() {
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const accordionItem = header.closest('.accordion-item');
                    const accordionContent = accordionItem.querySelector('.accordion-content');
                    const isExpanded = header.classList.contains('active');

                    header.classList.toggle('active');
                    header.setAttribute('aria-expanded', !isExpanded);

                    if (accordionContent.style.maxHeight) {
                        accordionContent.style.maxHeight = null;
                        accordionContent.style.paddingTop = '0';
                        accordionContent.style.paddingBottom = '0';
                        accordionContent.setAttribute('aria-hidden', 'true');
                    } else {
                        accordionContent.style.maxHeight = accordionContent.scrollHeight + "px";
                        accordionContent.style.paddingTop = '1.5rem';
                        accordionContent.style.paddingBottom = '1.5rem';
                        accordionContent.setAttribute('aria-hidden', 'false');
                    }

                    accordionHeaders.forEach(otherHeader => {
                        if (otherHeader !== header && otherHeader.classList.contains('active')) {
                            otherHeader.classList.remove('active');
                            otherHeader.setAttribute('aria-expanded', 'false');
                            const otherContent = otherHeader.closest('.accordion-item').querySelector('.accordion-content');
                            otherContent.style.maxHeight = null;
                            otherContent.style.paddingTop = '0';
                            otherContent.style.paddingBottom = '0';
                            otherContent.setAttribute('aria-hidden', 'true');
                        }
                    });
                });

                header.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        header.click();
                    }
                });
            });
        }

        /**
         * Sets up the newsletter subscription form.
         */
        function setupNewsletterForm() {
            const newsletterForm = document.getElementById('newsletter-form');
            const formSuccessMessage = document.getElementById('form-success-message');
            const downloadGuideLink = document.getElementById('download-guide-link');
            const emailInput = document.getElementById('email');

            if (!newsletterForm) return;

            newsletterForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const email = emailInput.value.trim();

                // Basic email validation regex
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

                if (!email) {
                    displayMessage('Por favor, digite o seu email para se inscrever.', 'error', emailInput);
                    return;
                }
                if (!emailRegex.test(email)) {
                    displayMessage('Por favor, digite um email válido.', 'error', emailInput);
                    return;
                }

                formSuccessMessage.classList.remove('hidden');
                downloadGuideLink.href = './guia-completo-descomplica.pdf';
                newsletterForm.reset();
                formSuccessMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                // No need for a specific timeout here as displayMessage handles its own timeout for the temp message
            });
        }

        /**
         * Sets up the contact form.
         */
        function setupContactForm() {
            const contactForm = document.getElementById('contact-form');
            const contactFormFeedback = document.getElementById('contact-form-feedback');
            const nameInput = document.getElementById('name');
            const emailContactInput = document.getElementById('email-contact');
            const messageInput = document.getElementById('message');

            if (!contactForm) return;

            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const name = nameInput.value.trim();
                const email = emailContactInput.value.trim();
                const message = messageInput.value.trim();

                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

                if (!name || !email || !message) {
                    displayMessage('Por favor, preencha todos os campos do formulário de contacto.', 'error', contactForm);
                    return;
                }
                if (!emailRegex.test(email)) {
                    displayMessage('Por favor, digite um email válido para contacto.', 'error', emailContactInput);
                    return;
                }

                contactFormFeedback.classList.remove('hidden', 'bg-red-100', 'border-red-400', 'text-red-700');
                contactFormFeedback.classList.add('bg-emerald-100', 'border-emerald-400', 'text-emerald-700');
                contactFormFeedback.innerHTML = `<p class="font-bold">Mensagem enviada com sucesso!</p><p>Agradecemos o seu contacto.</p>`;
                contactForm.reset();
                contactFormFeedback.scrollIntoView({ behavior: 'smooth', block: 'center' });
                setTimeout(() => {
                    contactFormFeedback.classList.add('hidden');
                }, 5000);
            });
        }

        /**
         * Manages individual quizzes on the page.
         * @param {string} quizId - The unique ID of the quiz (e.g., 'pomodoro').
         */
        class QuizManager {
            constructor(quizId) {
                this.quizId = quizId;
                this.quizData = this.getQuizData();
                this.container = document.getElementById(`quiz-${quizId}-questions-container`);
                this.counter = document.getElementById(`quiz-${quizId}-counter`);
                this.prevBtn = document.getElementById(`quiz-${quizId}-prev`);
                this.nextBtn = document.getElementById(`quiz-${quizId}-next`);
                this.submitFinalBtn = document.getElementById(`quiz-${quizId}-submit-final`);
                this.resultDiv = document.getElementById(`quiz-${quizId}-result`);
                this.retryBtn = document.getElementById(`quiz-${quizId}-retry`);

                this.initializeQuizAnswers();
            }

            /**
             * Retrieves quiz data based on quizId. (This data would ideally come from a server/API).
             * Hardcoded for now as per previous structure.
             */
            getQuizData() {
                const allQuizzes = {
                    pomodoro: {
                        questions: [
                            { question: "Qual a duração de um 'pomodoro' na Técnica Pomodoro?", options: ["10 minutos", "25 minutos", "45 minutos", "1 hora"], correctAnswer: "25 minutos" },
                            { question: "Qual o objetivo principal da Técnica Pomodoro?", options: ["Estudar por mais tempo sem parar", "Melhorar a concentração e produtividade", "Eliminar pausas completamente", "Fazer várias tarefas ao mesmo tempo"], correctAnswer: "Melhorar a concentração e produtividade" },
                            { question: "Após quantos 'pomodoros' uma 'pausa longa' é recomendada?", options: ["Um", "Dois", "Três", "Quatro"], correctAnswer: "Quatro" },
                            { question: "Qual a duração típica de uma 'pausa curta' no Pomodoro?", options: ["1 minuto", "5 minutos", "10 minutos", "20 minutos"], correctAnswer: "5 minutos" },
                            { question: "O que se deve fazer durante uma pausa Pomodoro?", options: ["Continuar a estudar", "Responder e-mails de trabalho", "Alongar-se e beber água", "Fazer outra tarefa complexa"], correctAnswer: "Alongar-se e beber água" },
                            { question: "A Técnica Pomodoro é mais adequada para quais tipos de tarefa?", options: ["Tarefas longas e ininterruptas", "Tarefas que exigem foco intenso e pausas regulares", "Tarefas criativas sem estrutura", "Tarefas em grupo que exigem constante interação"], correctAnswer: "Tarefas que exigem foco intenso e pausas regulares" }
                        ]
                    },
                    estudoAtivo: {
                        questions: [
                            { question: "Qual destas não é uma técnica de estudo ativo?", options: ["Fazer testes práticos", "Reler o material várias vezes", "Usar flashcards", "Autoexplicação"], correctAnswer: "Reler o material várias vezes" },
                            { question: "O que a 'recuperação ativa' faz com o conhecimento?", options: ["Apaga-o da memória", "Fortalece as conexões neurais", "Torna-o mais complexo", "Nenhuma das anteriores"], correctAnswer: "Fortalece as conexões neurais" },
                            { question: "Ao explicar a matéria para si mesmo em voz alta, qual técnica de estudo ativo está a usar?", options: ["Elaboração", "Testes práticos", "Autoexplicação", "Repetição espaçada"], correctAnswer: "Autoexplicação" },
                            { question: "Para que são mais úteis os flashcards no estudo ativo?", options: ["Ler longos textos", "Memorizar termos e definições", "Fazer brainstorming", "Escrever resumos"], correctAnswer: "Memorizar termos e definições" },
                            { question: "Qual a principal vantagem de fazer testes práticos?", options: ["Gastar tempo com exercícios desnecessários", "Identificar lacunas no conhecimento", "Apenas verificar o que já sabe", "Relaxar a mente"], correctAnswer: "Identificar lacunas no conhecimento" },
                            { question: "O que significa 'Elaboração' no contexto do estudo ativo?", options: ["Escrever elaboradamente sobre o assunto", "Conectar o novo conhecimento ao que já sabe", "Repetir informações exaustivamente", "Apenas ler o material sem interagir"], correctAnswer: "Conectar o novo conhecimento ao que já sabe" }
                        ]
                    },
                    repeticaoEspacada: {
                        questions: [
                            { question: "Qual o princípio da Repetição Espaçada?", options: ["Revisar todo o material todos os dias", "Revisar o material em intervalos crescentes", "Apenas ler o material uma vez", "Fazer resumos visuais"], correctAnswer: "Revisar o material em intervalos crescentes" },
                            { question: "Qual ferramenta é comumente usada para Repetição Espaçada com flashcards?", options: ["Microsoft Word", "Netflix", "Anki", "Spotify"], correctAnswer: "Anki" },
                            { question: "A Repetição Espaçada é baseada na pesquisa de qual 'curva'?", options: ["Curva da Fama", "Curva da Aprendizagem", "Curva do Esquecimento", "Curva de Crescimento"], correctAnswer: "Curva do Esquecimento" },
                            { question: "Se você domina um conceito na Repetição Espaçada, com que frequência o revisará?", options: ["Mais frequentemente", "Menos frequentemente", "Diariamente", "Nunca mais"], correctAnswer: "Menos frequentemente" },
                            { question: "Qual o principal benefício da Repetição Espaçada para a memória?", options: ["Memorização de curto prazo", "Memorização a longo prazo", "Diminuição da retenção", "Aumento do estresse"], correctAnswer: "Memorização a longo prazo" },
                            { question: "Além do Anki, qual outra aplicação é mencionada para Repetição Espaçada?", options: ["WhatsApp", "Quizlet", "Instagram", "TikTok"], correctAnswer: "Quizlet" }
                        ]
                    },
                    mapasMentais: {
                        questions: [
                            { question: "Onde se posiciona a ideia central em um mapa mental?", options: ["No canto superior esquerdo", "No centro", "Na margem inferior", "Em cada ramificação"], correctAnswer: "No centro" },
                            { question: "Qual o principal benefício dos mapas mentais?", options: ["Aumentar o tempo de estudo", "Promover a memorização por repetição", "Visualizar o conhecimento e melhorar a compreensão", "Apenas organizar listas de tarefas"], correctAnswer: "Visualizar o conhecimento e melhorar a compreensão" },
                            { question: "O que você deve usar para conectar ideias principais a sub-ramos em um mapa mental?", options: ["Números sequenciais", "Listas de verificação", "Palavras-chave, imagens e símbolos", "Apenas texto corrido"], correctAnswer: "Palavras-chave, imagens e símbolos" },
                            { question: "Qual aspecto da memória é mais estimulado pelos mapas mentais?", options: ["Memória auditiva", "Memória olfativa", "Memória visual", "Memória muscular"], correctAnswer: "Memória visual" },
                            { question: "Qual material é frequentemente utilizado para fazer um mapa mental?", options: ["Uma planilha de cálculo", "Um papel em branco e canetas coloridas", "Um editor de texto", "Um programa de apresentações"], correctAnswer: "Um papel em branco e canetas coloridas" },
                            { question: "Fazer conexões entre os ramos em um mapa mental ajuda a:", options: ["Isolar conceitos", "Ver a relação entre diferentes ideias", "Tornar o estudo mais demorado", "Apenas decorar informações"], correctAnswer: "Ver a relação entre diferentes ideias" }
                        ]
                    },
                    tecnicaFeynman: {
                        questions: [
                            { question: "Qual a principal ideia da Técnica Feynman?", options: ["Memorizar tudo o que for lido", "Explicar um conceito de forma complexa", "Explicar um conceito como se fosse para uma criança", "Ler em voz alta sem parar"], correctAnswer: "Explicar um conceito como se fosse para uma criança" },
                            { question: "O que a Técnica Feynman ajuda a identificar?", options: ["Novos tópicos para estudar", "Lacunas na compreensão do assunto", "Apenas erros de ortografia", "Pontos de melhoria na escrita"], correctAnswer: "Lacunas no conhecimento do assunto" },
                            { question: "Qual o próximo passo ao identificar uma lacuna de conhecimento na Técnica Feynman?", options: ["Desistir do conceito", "Voltar ao material para preencher a lacuna", "Pedir a alguém para explicar", "Mudar para outro tópico"], correctAnswer: "Voltar ao material para preencher a lacuna" },
                            { question: "Qual é um dos benefícios da Técnica Feynman?", options: ["Estudo passivo", "Aprendizado superficial", "Promoção do aprendizado ativo", "Apenas memorização de termos"], correctAnswer: "Promote o aprendizado ativo" },
                            { question: "Quem foi Richard Feynman?", options: ["Um historiador famoso", "Um físico e educador", "Um filósofo antigo", "Um artista renascentista"], correctAnswer: "Um físico e educador" },
                            { question: "A Técnica Feynman é útil para:", options: ["Apenas conceitos simples", "Apenas disciplinas exatas", "Qualquer conceito, simples ou complexo", "Tarefas que não exigem compreensão profunda"], correctAnswer: "Qualquer conceito, simples ou complexo" }
                        ]
                    }
                };
                return allQuizzes[this.quizId];
            }

            /**
             * Initializes or resets the quiz state.
             */
            initializeQuizAnswers() {
                this.quizData.currentQuestionIndex = 0;
                this.quizData.selectedAnswers = Array(this.quizData.questions.length).fill(null);
                this.quizData.feedbackStatus = Array(this.quizData.questions.length).fill(null);
                this.quizData.correctAnswersCount = 0;
            }

            /**
             * Renders the current question and updates UI elements.
             */
            renderQuestion() {
                if (!this.container || !this.quizData || this.quizData.questions.length === 0) return;

                this.container.innerHTML = '';
                this.retryBtn.classList.add('hidden');
                this.resultDiv.innerHTML = ''; // Clear previous result

                const q = this.quizData.questions[this.quizData.currentQuestionIndex];
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question mb-4';
                
                let optionsHtml = '';
                q.options.forEach((option, optIndex) => {
                    const radioInputId = `quiz-${this.quizId}-q${this.quizData.currentQuestionIndex}-opt${optIndex}`;
                    optionsHtml += `
                        <div class="flex items-center mb-2">
                            <input type="radio" id="${radioInputId}" name="quiz-${this.quizId}-q${this.quizData.currentQuestionIndex}" value="${option}" class="form-radio text-sky-600 h-4 w-4" aria-labelledby="${radioInputId}-label">
                            <label for="${radioInputId}" class="ml-2 text-slate-600 cursor-pointer" id="${radioInputId}-label">${option}</label>
                        </div>
                    `;
                });

                questionDiv.innerHTML = `
                    <p class="font-medium text-slate-700 mb-2" id="question-${this.quizId}-${this.quizData.currentQuestionIndex}">${this.quizData.currentQuestionIndex + 1}. ${q.question}</p>
                    <div class="options-container" role="radiogroup" aria-labelledby="question-${this.quizId}-${this.quizData.currentQuestionIndex}">${optionsHtml}</div>
                    <div class="question-feedback" id="quiz-${this.quizId}-q${this.quizData.currentQuestionIndex}-feedback" aria-live="polite" aria-atomic="true"></div>
                `;

                this.container.appendChild(questionDiv);

                const feedbackDiv = questionDiv.querySelector(`#quiz-${this.quizId}-q${this.quizData.currentQuestionIndex}-feedback`);
                const currentQuestionRadioInputs = questionDiv.querySelectorAll('input[type="radio"]');

                if (this.quizData.selectedAnswers[this.quizData.currentQuestionIndex] !== null) {
                    const previouslySelectedRadio = questionDiv.querySelector(`input[value="${this.quizData.selectedAnswers[this.quizData.currentQuestionIndex]}"]`);
                    if (previouslySelectedRadio) {
                        previouslySelectedRadio.checked = true;
                    }
                    currentQuestionRadioInputs.forEach(input => { input.disabled = true; });

                    if (this.quizData.feedbackStatus[this.quizData.currentQuestionIndex] === true) {
                        feedbackDiv.textContent = 'Correto!';
                        feedbackDiv.classList.add('correct');
                    } else if (this.quizData.feedbackStatus[this.quizData.currentQuestionIndex] === false) {
                        feedbackDiv.textContent = `Incorreto. A resposta correta é: ${q.correctAnswer}`;
                        feedbackDiv.classList.add('incorrect');
                    }
                } else {
                    currentQuestionRadioInputs.forEach(radioInput => {
                        radioInput.addEventListener('change', (event) => {
                            const selectedOption = event.target.value;
                            feedbackDiv.innerHTML = '';
                            feedbackDiv.classList.remove('correct', 'incorrect', 'animate-feedback-pulse');

                            if (selectedOption === q.correctAnswer) {
                                feedbackDiv.textContent = 'Correto!';
                                feedbackDiv.classList.add('correct', 'animate-feedback-pulse');
                                this.quizData.feedbackStatus[this.quizData.currentQuestionIndex] = true;
                            } else {
                                feedbackDiv.textContent = `Incorreto. A resposta correta é: ${q.correctAnswer}`;
                                feedbackDiv.classList.add('incorrect', 'animate-feedback-pulse');
                                this.quizData.feedbackStatus[this.quizData.currentQuestionIndex] = false;
                            }
                            this.quizData.selectedAnswers[this.quizData.currentQuestionIndex] = selectedOption;
                            currentQuestionRadioInputs.forEach(input => { input.disabled = true; });
                        });
                    });
                }

                this.counter.textContent = `Pergunta ${this.quizData.currentQuestionIndex + 1} de ${this.quizData.questions.length}`;
                this.prevBtn.disabled = this.quizData.currentQuestionIndex === 0;
                this.nextBtn.classList.remove('hidden');
                this.submitFinalBtn.classList.add('hidden');

                if (this.quizData.currentQuestionIndex === this.quizData.questions.length - 1) {
                    this.nextBtn.classList.add('hidden');
                    this.submitFinalBtn.classList.remove('hidden');
                }
            }

            /**
             * Checks all answers and displays the final score.
             */
            checkFinalAnswers() {
                this.quizData.correctAnswersCount = this.quizData.feedbackStatus.filter(status => status === true).length;
                
                this.resultDiv.innerHTML = `Você acertou ${this.quizData.correctAnswersCount} de ${this.quizData.questions.length} perguntas!`;
                this.resultDiv.classList.remove('text-emerald-600', 'text-red-600');
                if (this.quizData.correctAnswersCount === this.quizData.questions.length) {
                    this.resultDiv.classList.add('text-emerald-600');
                } else {
                    this.resultDiv.classList.add('text-red-600');
                }
                
                this.retryBtn.classList.remove('hidden');
            }

            /**
             * Resets the quiz to its initial state, re-enabling all options.
             */
            resetQuiz() {
                this.initializeQuizAnswers();
                this.renderQuestion();
                this.resultDiv.innerHTML = '';
                this.retryBtn.classList.add('hidden');
                this.nextBtn.classList.remove('hidden');
                this.prevBtn.disabled = true;
                this.submitFinalBtn.classList.add('hidden');
                
                // Re-enable all radio options for all questions in the quiz
                // This targets all questions in the container, regardless of the current view
                const allQuestionContainers = document.getElementById(`quiz-${this.quizId}-questions-container`).closest('.quiz-section').querySelectorAll('.quiz-question');
                allQuestionContainers.forEach(qDiv => {
                    qDiv.querySelectorAll('input[type="radio"]').forEach(input => {
                        input.disabled = false;
                        input.checked = false;
                    });
                    qDiv.querySelector('.question-feedback').innerHTML = ''; // Clear individual feedback
                    qDiv.querySelector('.question-feedback').classList.remove('correct', 'incorrect', 'animate-feedback-pulse');
                });
            }

            /**
             * Sets up event listeners for quiz navigation and actions.
             */
            setupEventListeners() {
                if (this.nextBtn) {
                    this.nextBtn.addEventListener('click', () => {
                        if (this.quizData.currentQuestionIndex < this.quizData.questions.length - 1) {
                            this.quizData.currentQuestionIndex++;
                            this.renderQuestion();
                        }
                    });
                }
                if (this.prevBtn) {
                    this.prevBtn.addEventListener('click', () => {
                        if (this.quizData.currentQuestionIndex > 0) {
                            this.quizData.currentQuestionIndex--;
                            this.renderQuestion();
                        }
                    });
                }
                if (this.submitFinalBtn) {
                    this.submitFinalBtn.addEventListener('click', () => {
                        this.checkFinalAnswers();
                        this.nextBtn.classList.add('hidden');
                        this.prevBtn.classList.add('hidden');
                        this.submitFinalBtn.classList.add('hidden');
                        
                        const questionContainers = this.container.querySelectorAll('.quiz-question');
                        questionContainers.forEach(qDiv => {
                            qDiv.querySelectorAll('input[type="radio"]').forEach(input => {
                                input.disabled = true;
                            });
                        });
                    });
                }
                if (this.retryBtn) {
                    this.retryBtn.addEventListener('click', () => {
                        this.resetQuiz();
                    });
                }
            }

            /**
             * Initializes the QuizManager.
             */
            init() {
                this.renderQuestion();
                this.setupEventListeners();
            }
        }

        /**
         * Manages flashcards functionality.
         */
        class FlashcardManager {
            constructor() {
                this.flashcardTermInput = document.getElementById('flashcard-term');
                this.flashcardDefinitionInput = document.getElementById('flashcard-definition');
                this.addFlashcardBtn = document.getElementById('add-flashcard');
                this.flashcardDisplay = document.getElementById('flashcard-display');
                this.currentFlashcardTerm = document.getElementById('current-flashcard-term');
                this.currentFlashcardDefinition = document.getElementById('current-flashcard-definition');
                this.clearFlashcardsBtn = document.getElementById('clear-flashcards');
                this.deleteCurrentFlashcardBtn = document.getElementById('delete-current-flashcard'); // New button
                this.flashcardCountSpan = document.getElementById('flashcard-count');
                this.flashcardSelector = document.getElementById('flashcard-selector');
                this.generateDefinitionBtn = document.getElementById('generate-definition');
                this.definitionLoader = document.getElementById('definition-loader');

                this.flashcards = [];
                this.currentFlashcardIndex = -1;
                this.isFlipped = false;
            }

            /**
             * Loads flashcards from localStorage.
             */
            loadFlashcards() {
                const storedFlashcards = localStorage.getItem('descomplicaAcad_flashcards');
                if (storedFlashcards) {
                    try {
                        this.flashcards = JSON.parse(storedFlashcards);
                    } catch (e) {
                        console.error("Erro ao carregar flashcards do localStorage:", e);
                        this.flashcards = []; // Reset if parsing fails
                    }
                }
                this.updateFlashcardCount();
                this.renderFlashcardSelector();
                this.displayFlashcard();
            }

            /**
             * Saves flashcards to localStorage.
             */
            saveFlashcards() {
                localStorage.setItem('descomplicaAcad_flashcards', JSON.stringify(this.flashcards));
                this.updateFlashcardCount();
                this.renderFlashcardSelector();
            }

            /**
             * Updates the displayed total flashcard count.
             */
            updateFlashcardCount() {
                this.flashcardCountSpan.textContent = `Total de flashcards: ${this.flashcards.length}`;
                this.flashcardSelector.disabled = this.flashcards.length === 0;
                this.deleteCurrentFlashcardBtn.disabled = this.flashcards.length === 0; // Disable delete button if no flashcards
                this.clearFlashcardsBtn.disabled = this.flashcards.length === 0; // Disable clear all button if no flashcards
            }

            /**
             * Renders options in the flashcard selector dropdown.
             */
            renderFlashcardSelector() {
                this.flashcardSelector.innerHTML = '<option value="-1">Selecione um flashcard...</option>';
                this.flashcards.forEach((card, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = card.term;
                    this.flashcardSelector.appendChild(option);
                });

                if (this.currentFlashcardIndex !== -1 && this.flashcards.length > 0) {
                    this.flashcardSelector.value = this.currentFlashcardIndex;
                } else {
                    this.flashcardSelector.value = "-1";
                }
            }

            /**
             * Displays a specific flashcard.
             * @param {number|null} index - The index of the flashcard to display.
             */
            displayFlashcard(index = null) {
                if (this.flashcards.length === 0) {
                    this.currentFlashcardTerm.textContent = 'Nenhum flashcard adicionado.';
                    this.currentFlashcardDefinition.innerHTML = '';
                    this.flashcardDisplay.classList.remove('flipped');
                    this.currentFlashcardTerm.closest('.flashcard-content').style.display = 'flex';
                    this.currentFlashcardDefinition.closest('.flashcard-content').style.display = 'none';
                    this.currentFlashcardTerm.setAttribute('aria-hidden', 'false');
                    this.currentFlashcardDefinition.setAttribute('aria-hidden', 'true');
                    this.flashcardDisplay.setAttribute('aria-label', 'Nenhum flashcard para exibir.');
                    this.currentFlashcardIndex = -1;
                    this.flashcardSelector.value = "-1";
                    this.updateFlashcardCount(); // Ensure count and button states are updated
                    return;
                }

                let newIndex;
                if (index !== null && index >= 0 && index < this.flashcards.length) {
                    newIndex = index;
                } else {
                    // If no specific index, or current index is invalid, try to pick a relevant one
                    if (this.currentFlashcardIndex >= 0 && this.currentFlashcardIndex < this.flashcards.length) {
                        newIndex = this.currentFlashcardIndex; // Stay on the same card if still valid
                    } else {
                        newIndex = 0; // Otherwise, go to the first card
                    }
                }

                this.currentFlashcardIndex = newIndex;
                const card = this.flashcards[this.currentFlashcardIndex];

                this.currentFlashcardTerm.textContent = card.term;
                this.flashcardDisplay.classList.remove('flipped'); // Ensure card is showing term side
                this.isFlipped = false;
                
                // Simple replace for common unwanted markdown characters if they appear
                let formattedDefinition = card.definition.replace(/\*/g, '').replace(/#/g, ''); 
                this.currentFlashcardDefinition.innerHTML = formattedDefinition; 

                this.currentFlashcardTerm.closest('.flashcard-content').style.display = 'flex';
                this.currentFlashcardDefinition.closest('.flashcard-content').style.display = 'none';
                this.currentFlashcardTerm.setAttribute('aria-hidden', 'false');
                this.currentFlashcardDefinition.setAttribute('aria-hidden', 'true');
                this.flashcardDisplay.setAttribute('aria-label', `Flashcard, Termo: ${card.term}. Clique para virar e ver a definição.`);

                this.flashcardSelector.value = this.currentFlashcardIndex;
                this.updateFlashcardCount(); // Ensure count and button states are updated
            }

            /**
             * Generates a definition using the Gemini API.
             */
            async generateDefinition() {
                const term = this.flashcardTermInput.value.trim();
                if (!term) {
                    displayMessage('Por favor, digite um termo para gerar a definição.', 'error', this.flashcardTermInput);
                    return;
                }

                toggleLoadingState(this.generateDefinitionBtn, this.definitionLoader, true);
                this.flashcardTermInput.disabled = true; // Disable input during loading
                this.flashcardDefinitionInput.disabled = true; // Disable input during loading


                try {
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: `Forneça uma definição concisa e abrangente para o seguinte termo em português (Portugal), adequada para um flashcard académico: "${term}". A definição deve ser direta, cobrir os aspetos mais importantes do conceito e NÃO deve conter asteriscos, negritos, cabeçalhos, listas, ou qualquer outra formatação Markdown. Apenas o texto simples da definição.` }] });
                    const payload = { contents: chatHistory };
                    const apiKey = ""; 

                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const definition = result.candidates[0].content.parts[0].text;
                        this.flashcardDefinitionInput.value = definition.trim();
                    } else {
                        throw new Error('Não foi possível gerar a definição. Resposta da API inesperada.');
                    }
                } catch (error) {
                    console.error('Erro ao chamar a API Gemini:', error);
                    displayMessage(`Erro ao gerar definição: ${error.message}. Por favor, tente novamente.`, 'error', this.flashcardDefinitionInput);
                    this.flashcardDefinitionInput.value = 'Erro ao gerar definição. Por favor, tente novamente.';
                } finally {
                    toggleLoadingState(this.generateDefinitionBtn, this.definitionLoader, false);
                    this.flashcardTermInput.disabled = false; // Re-enable input
                    this.flashcardDefinitionInput.disabled = false; // Re-enable input
                    feather.replace(); // Ensure icons are re-rendered if new ones exist
                    // Ensure the card is showing the term side after definition generation
                    this.flashcardDisplay.classList.remove('flipped');
                    this.isFlipped = false;
                    this.currentFlashcardTerm.closest('.flashcard-content').style.display = 'flex';
                    this.currentFlashcardDefinition.closest('.flashcard-content').style.display = 'none';
                    this.currentFlashcardTerm.setAttribute('aria-hidden', 'false');
                    this.currentFlashcardDefinition.setAttribute('aria-hidden', 'true');
                    this.flashcardDisplay.setAttribute('aria-label', `Flashcard, Termo: ${this.flashcardTermInput.value.trim()}. Clique para virar e ver a definição.`);
                }
            }

            /**
             * Adds a new flashcard.
             */
            addFlashcard() {
                const term = this.flashcardTermInput.value.trim();
                const definition = this.flashcardDefinitionInput.value.trim();

                if (term && definition) {
                    this.flashcards.push({ term, definition });
                    this.saveFlashcards();
                    this.flashcardTermInput.value = '';
                    this.flashcardDefinitionInput.value = '';
                    this.displayFlashcard(this.flashcards.length - 1); // Display the newly added card
                    displayMessage('Flashcard adicionado com sucesso!', 'success', this.addFlashcardBtn);
                } else {
                    displayMessage('Por favor, preencha o termo e a definição do flashcard.', 'error', this.addFlashcardBtn);
                }
            }

            /**
             * Toggles (flips) the displayed flashcard.
             */
            toggleFlashcard() {
                if (this.flashcards.length > 0) {
                    this.flashcardDisplay.classList.toggle('flipped');
                    this.isFlipped = !this.isFlipped;

                    if (this.isFlipped) {
                        this.currentFlashcardTerm.closest('.flashcard-content').style.display = 'none';
                        this.currentFlashcardDefinition.closest('.flashcard-content').style.display = 'flex';
                        this.currentFlashcardTerm.setAttribute('aria-hidden', 'true');
                        this.currentFlashcardDefinition.setAttribute('aria-hidden', 'false');
                        this.flashcardDisplay.setAttribute('aria-label', `Flashcard virado. Definição: ${this.currentFlashcardDefinition.textContent}. Clique para virar de volta.`);
                    } else {
                        this.currentFlashcardTerm.closest('.flashcard-content').style.display = 'flex';
                        this.currentFlashcardDefinition.closest('.flashcard-content').style.display = 'none';
                        this.currentFlashcardTerm.setAttribute('aria-hidden', 'false');
                        this.currentFlashcardDefinition.setAttribute('aria-hidden', 'true');
                        this.flashcardDisplay.setAttribute('aria-label', `Flashcard virado. Termo: ${this.currentFlashcardTerm.textContent}. Clique para virar e ver a definição.`);
                    }
                }
            }

            /**
             * Deletes the currently displayed flashcard.
             */
            deleteCurrentFlashcard() {
                if (this.currentFlashcardIndex === -1 || this.flashcards.length === 0) {
                    displayMessage('Não há flashcard selecionado para excluir.', 'info', this.deleteCurrentFlashcardBtn);
                    return;
                }

                showCustomConfirm(
                    'Confirmar Exclusão',
                    'Tem certeza que deseja excluir este flashcard?',
                    () => {
                        this.flashcards.splice(this.currentFlashcardIndex, 1);
                        this.saveFlashcards();

                        // After deletion, adjust the currentFlashcardIndex
                        if (this.flashcards.length > 0) {
                            // If the deleted card was the last one, adjust index to the new last card
                            if (this.currentFlashcardIndex >= this.flashcards.length) {
                                this.currentFlashcardIndex = this.flashcards.length - 1;
                            }
                            // Re-display the card at the adjusted index
                            this.displayFlashcard(this.currentFlashcardIndex);
                        } else {
                            // If no flashcards left, show empty state
                            this.displayFlashcard(); // This will show "Nenhum flashcard adicionado."
                        }
                        displayMessage('Flashcard excluído com sucesso!', 'success', this.deleteCurrentFlashcardBtn);
                    }
                );
            }

            /**
             * Sets up all event listeners for flashcard functionality.
             */
            setupEventListeners() {
                if (this.generateDefinitionBtn) {
                    this.generateDefinitionBtn.addEventListener('click', () => this.generateDefinition());
                }
                if (this.addFlashcardBtn) {
                    this.addFlashcardBtn.addEventListener('click', () => this.addFlashcard());
                }
                if (this.flashcardDisplay) {
                    this.flashcardDisplay.addEventListener('click', () => this.toggleFlashcard());
                }
                if (this.flashcardSelector) {
                    this.flashcardSelector.addEventListener('change', (event) => {
                        const selectedIndex = parseInt(event.target.value);
                        if (selectedIndex !== -1) {
                            this.displayFlashcard(selectedIndex);
                        } else {
                            // Handle "No flashcard selected..." option explicitly for display
                            this.currentFlashcardTerm.textContent = 'Nenhum flashcard selecionado.';
                            this.currentFlashcardDefinition.innerHTML = '';
                            this.flashcardDisplay.classList.remove('flipped');
                            this.currentFlashcardTerm.closest('.flashcard-content').style.display = 'flex';
                            this.currentFlashcardDefinition.closest('.flashcard-content').style.display = 'none';
                            this.flashcardDisplay.setAttribute('aria-label', 'Nenhum flashcard selecionado.');
                            this.currentFlashcardIndex = -1; // Reset index
                        }
                    });
                }
                if (this.deleteCurrentFlashcardBtn) {
                    this.deleteCurrentFlashcardBtn.addEventListener('click', () => this.deleteCurrentFlashcard());
                }
                if (this.clearFlashcardsBtn) {
                    this.clearFlashcardsBtn.addEventListener('click', () => {
                        showCustomConfirm(
                            'Tem certeza que deseja limpar todos os flashcards?',
                            'Esta ação não pode ser desfeita.',
                            () => {
                                this.flashcards = [];
                                this.saveFlashcards();
                                this.displayFlashcard();
                                this.flashcardSelector.value = "-1";
                                displayMessage('Todos os flashcards foram limpos.', 'info', this.clearFlashcardsBtn);
                            }
                        );
                    });
                }
            }

            /**
             * Initializes the FlashcardManager.
             */
            init() {
                this.loadFlashcards();
                this.setupEventListeners();
            }
        }

        /**
         * Manages the AI study question generator.
         */
        class QuestionGenerator {
            constructor() {
                this.studyTextInput = document.getElementById('study-text-input');
                this.generateQuestionsBtn = document.getElementById('generate-questions-btn');
                this.questionsLoader = document.getElementById('questions-loader');
                this.generatedQuestionsOutput = document.getElementById('generated-questions-output');
                this.clearGeneratedQuestionsBtn = document.getElementById('clear-generated-questions');

                this.generatedQuestions = [];
            }

            /**
             * Loads generated questions from localStorage.
             */
            loadGeneratedQuestions() {
                const storedQuestions = localStorage.getItem('generatedStudyQuestions');
                if (storedQuestions) {
                    try {
                        this.generatedQuestions = JSON.parse(storedQuestions);
                        // Ensure 'isAnswerVisible' property exists for all loaded questions
                        this.generatedQuestions = this.generatedQuestions.map(qa => ({
                            ...qa,
                            isAnswerVisible: qa.isAnswerVisible === undefined ? false : qa.isAnswerVisible
                        }));
                    }
                    catch (e) {
                        console.error("Erro ao carregar questões geradas do localStorage:", e);
                        this.generatedQuestions = [];
                    }
                }
                this.renderGeneratedQuestions();
            }

            /**
             * Saves generated questions to localStorage.
             */
            saveGeneratedQuestions() {
                localStorage.setItem('generatedStudyQuestions', JSON.stringify(this.generatedQuestions));
            }

            /**
             * Renders generated questions in the output area.
             */
            renderGeneratedQuestions() {
                this.generatedQuestionsOutput.innerHTML = '';

                if (this.generatedQuestions.length === 0) {
                    this.generatedQuestionsOutput.innerHTML = '<p class="text-slate-500 italic">As questões geradas aparecerão aqui.</p>';
                    this.clearGeneratedQuestionsBtn.classList.add('hidden');
                } else {
                    this.clearGeneratedQuestionsBtn.classList.remove('hidden');
                    let questionsHtml = '';
                    this.generatedQuestions.forEach((qa, index) => {
                        questionsHtml += `
                            <div class="generated-question-item" id="question-item-${index}">
                                <p class="question-text">${index + 1}. ${qa.question}</p>
                                <button class="toggle-answer-btn bg-sky-500 text-white px-4 py-2 rounded-md hover:bg-sky-600 transition-colors duration-200 text-sm" aria-expanded="${qa.isAnswerVisible ? 'true' : 'false'}" aria-controls="answer-content-${index}">
                                    ${qa.isAnswerVisible ? 'Ocultar Resposta' : 'Mostrar Resposta'}
                                </button>
                                <div id="answer-content-${index}" class="generated-answer-content ${qa.isAnswerVisible ? 'show' : ''}" aria-hidden="${qa.isAnswerVisible ? 'false' : 'true'}">
                                    <p>${qa.answer}</p>
                                </div>
                            </div>
                        `;
                    });
                    // Optimized DOM manipulation: set innerHTML once
                    this.generatedQuestionsOutput.innerHTML = questionsHtml;

                    // Feather icons for the new content
                    feather.replace();

                    // No need for individual event listeners here due to event delegation
                    this.generatedQuestionsOutput.scrollTop = 0;
                }
            }

            /**
             * Handles the click event for toggle answer buttons using event delegation.
             * @param {Event} event - The click event.
             */
            handleToggleAnswerClick(event) {
                const toggleBtn = event.target.closest('.toggle-answer-btn');
                if (toggleBtn) {
                    const questionItem = toggleBtn.closest('.generated-question-item');
                    if (questionItem) {
                        const index = parseInt(questionItem.id.replace('question-item-', ''));
                        const qa = this.generatedQuestions[index];

                        qa.isAnswerVisible = !qa.isAnswerVisible;
                        this.saveGeneratedQuestions(); // Save state after toggle

                        const answerContent = questionItem.querySelector(`#answer-content-${index}`);
                        if (qa.isAnswerVisible) {
                            answerContent.classList.add('show');
                            toggleBtn.textContent = 'Ocultar Resposta';
                            toggleBtn.setAttribute('aria-expanded', 'true');
                            answerContent.setAttribute('aria-hidden', 'false');
                        } else {
                            answerContent.classList.remove('show');
                            toggleBtn.textContent = 'Mostrar Resposta';
                            toggleBtn.setAttribute('aria-expanded', 'false');
                            answerContent.setAttribute('aria-hidden', 'true');
                        }
                    }
                }
            }

            /**
             * Generates questions using the Gemini API.
             */
            async generateQuestions() {
                const textToAnalyze = this.studyTextInput.value.trim();

                if (!textToAnalyze) {
                    displayMessage('Por favor, cole algum texto para gerar questões.', 'error', this.studyTextInput);
                    return;
                }

                toggleLoadingState(this.generateQuestionsBtn, this.questionsLoader, true);
                this.studyTextInput.disabled = true; // Disable input during loading
                // Update feedback messages during loading process
                this.generatedQuestionsOutput.innerHTML = '<p class="text-slate-500 italic">A analisar o seu texto...</p>';
                this.clearGeneratedQuestionsBtn.classList.add('hidden');

                try {
                    // Give a brief moment for the "A analisar" message to display
                    await new Promise(resolve => setTimeout(resolve, 500)); 
                    this.generatedQuestionsOutput.innerHTML = '<p class="text-slate-500 italic">A gerar perguntas... Por favor, aguarde.</p>';
                    await new Promise(resolve => setTimeout(resolve, 500));

                    let chatHistory = [];
                    chatHistory.push({
                        role: "user",
                        parts: [{
                            text: `A partir do seguinte texto em português (Portugal), gere 5 a 7 pares de questões e respostas de estudo de nível universitário. As questões devem ser diretas e as respostas concisas e claras. Não inclua qualquer formatação Markdown para as respostas (como asteriscos, negritos, cabeçalhos, listas, etc.). Forneça a saída como um array JSON, onde cada objeto tem as chaves 'question' e 'answer'.

                            Exemplo de formato esperado:
                            [
                              {
                                "question": "Qual é o objetivo da Técnica Pomodoro?",
                                "answer": "Melhorar o foco e a produtividade dividindo o tempo em blocos."
                              },
                              {
                                "question": "Descreva a Matriz de Eisenhower.",
                                "answer": "É uma ferramenta para priorizar tarefas com base em urgência e importância."
                              }
                            ]

                            Texto para análise:
                            "${textToAnalyze}"`
                        }]
                    });
                    const payload = {
                        contents: chatHistory,
                        generationConfig: {
                            responseMimeType: "application/json",
                            responseSchema: {
                                type: "ARRAY",
                                items: {
                                    type: "OBJECT",
                                    properties: {
                                        question: { type: "STRING" },
                                        answer: { type: "STRING" }
                                    },
                                    propertyOrdering: ["question", "answer"]
                                }
                            }
                        }
                    };
                    const apiKey = "";

                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        
                        const jsonString = result.candidates[0].content.parts[0].text;
                        const parsedQuestions = JSON.parse(jsonString);
                        
                        this.generatedQuestions = parsedQuestions.map(qa => ({
                            ...qa,
                            isAnswerVisible: false // Ensure new questions default to hidden answers
                        }));
                        this.saveGeneratedQuestions();
                        this.renderGeneratedQuestions();
                    } else {
                        throw new Error('Não foi possível gerar as questões. Resposta da API inesperada.');
                    }
                } catch (error) {
                    console.error('Erro ao chamar a API Gemini para gerar questões:', error);
                    this.generatedQuestionsOutput.innerHTML = `<p class="text-red-600">Erro ao gerar questões: ${error.message}. Por favor, tente novamente.</p>`;
                } finally {
                    toggleLoadingState(this.generateQuestionsBtn, this.questionsLoader, false);
                    this.studyTextInput.disabled = false; // Re-enable input
                    feather.replace();
                }
            }

            /**
             * Sets up event listeners for the question generator.
             */
            setupEventListeners() {
                if (this.generateQuestionsBtn) {
                    this.generateQuestionsBtn.addEventListener('click', () => this.generateQuestions());
                }
                if (this.clearGeneratedQuestionsBtn) {
                    this.clearGeneratedQuestionsBtn.addEventListener('click', () => {
                        showCustomConfirm(
                            'Tem certeza que deseja limpar todas as questões geradas?',
                            'Esta ação não pode ser desfeita.',
                            () => {
                                this.generatedQuestions = [];
                                this.saveGeneratedQuestions();
                                this.renderGeneratedQuestions();
                                this.studyTextInput.value = ''; // Clear text input as well
                                displayMessage('Todas as questões geradas foram limpas.', 'info', this.clearGeneratedQuestionsBtn);
                            }
                        );
                    });
                }
                // Event delegation for toggle answer buttons
                this.generatedQuestionsOutput.addEventListener('click', (event) => this.handleToggleAnswerClick(event));
            }

            /**
             * Initializes the QuestionGenerator.
             */
            init() {
                this.loadGeneratedQuestions();
                this.setupEventListeners();
            }
        }

        /**
         * Manages the AI Study Planner functionality.
         */
        class StudyPlanner {
            constructor() {
                this.subjectsInput = document.getElementById('study-plan-subjects');
                this.deadlinesInput = document.getElementById('study-plan-deadlines');
                this.startDateInput = document.getElementById('study-plan-start-date');
                this.durationInput = document.getElementById('study-plan-duration');
                this.intensityInput = document.getElementById('study-plan-intensity'); // New input
                this.preferredTimesInput = document.getElementById('study-plan-preferred-times'); // New input
                this.generatePlanBtn = document.getElementById('generate-study-plan-btn');
                this.planLoader = document.getElementById('study-plan-loader');
                this.generatedPlanOutput = document.getElementById('generated-study-plan-output');
                this.clearPlanBtn = document.getElementById('clear-study-plan');

                this.studyPlan = [];
            }

            /**
             * Loads the study plan from localStorage.
             */
            loadStudyPlan() {
                const storedPlan = localStorage.getItem('descomplicaAcad_studyPlan');
                if (storedPlan) {
                    try {
                        const parsedPlan = JSON.parse(storedPlan);
                        // Ensure each activity has an `isCompleted` property when loading
                        this.studyPlan = parsedPlan.map(dayPlan => ({
                            ...dayPlan,
                            suggested_activities: dayPlan.suggested_activities.map(activity =>
                                typeof activity === 'object' ? activity : { text: activity, isCompleted: false }
                            )
                        }));
                    } catch (e) {
                        console.error("Erro ao carregar plano de estudos do localStorage:", e);
                        this.studyPlan = [];
                    }
                }
                this.renderStudyPlan();
            }

            /**
             * Saves the study plan to localStorage.
             */
            saveStudyPlan() {
                localStorage.setItem('descomplicaAcad_studyPlan', JSON.stringify(this.studyPlan));
            }

            /**
             * Renders the generated study plan in the output area.
             */
            renderStudyPlan() {
                this.generatedPlanOutput.innerHTML = '';

                if (this.studyPlan.length === 0) {
                    this.generatedPlanOutput.innerHTML = '<p class="text-slate-500 italic">O seu plano de estudos gerado aparecerá aqui.</p>';
                    this.clearPlanBtn.classList.add('hidden');
                } else {
                    this.clearPlanBtn.classList.remove('hidden');
                    let planHtml = '';
                    this.studyPlan.forEach((dayPlan, dayIndex) => {
                        planHtml += `
                            <div class="study-plan-item">
                                <p class="day-title">${dayPlan.day} ${dayPlan.date_hint ? `(${dayPlan.date_hint})` : ''}</p>
                                <p class="focus-areas">Foco: ${dayPlan.focus_areas.join(', ')}</p>
                                <ul>
                        `;
                        dayPlan.suggested_activities.forEach((activity, activityIndex) => {
                            const activityText = typeof activity === 'object' ? activity.text : activity;
                            const isCompleted = typeof activity === 'object' ? activity.isCompleted : false;
                            planHtml += `
                                <li class="${isCompleted ? 'completed-task' : ''}">
                                    <input type="checkbox" id="task-${dayIndex}-${activityIndex}" data-day-index="${dayIndex}" data-activity-index="${activityIndex}" class="task-checkbox form-checkbox h-4 w-4 text-green-600 rounded" ${isCompleted ? 'checked' : ''} aria-label="Marcar atividade '${activityText}' como concluída">
                                    <label for="task-${dayIndex}-${activityIndex}">${activityText}</label>
                                </li>
                            `;
                        });
                        planHtml += `</ul></div>`;
                    });
                    this.generatedPlanOutput.innerHTML = planHtml;
                    this.generatedPlanOutput.scrollTop = 0; // Scroll to top of the plan

                    // Add event listeners for checkboxes after rendering
                    this.generatedPlanOutput.querySelectorAll('.task-checkbox').forEach(checkbox => {
                        checkbox.addEventListener('change', this.handleTaskCompletion.bind(this));
                    });
                }
            }

            /**
             * Handles task completion toggling.
             * @param {Event} event - The change event from the checkbox.
             */
            handleTaskCompletion(event) {
                const checkbox = event.target;
                const dayIndex = parseInt(checkbox.dataset.dayIndex);
                const activityIndex = parseInt(checkbox.dataset.activityIndex);

                if (this.studyPlan[dayIndex] && this.studyPlan[dayIndex].suggested_activities[activityIndex]) {
                    this.studyPlan[dayIndex].suggested_activities[activityIndex].isCompleted = checkbox.checked;
                    this.saveStudyPlan(); // Persist the completion state
                    
                    // Update visual state immediately
                    const listItem = checkbox.closest('li');
                    if (checkbox.checked) {
                        listItem.classList.add('completed-task');
                    } else {
                        listItem.classList.remove('completed-task');
                    }
                    displayMessage(`Tarefa ${checkbox.checked ? 'concluída' : 'reaberta'}!`, 'info', this.clearPlanBtn);
                }
            }


            /**
             * Generates the study plan using the Gemini API.
             */
            async generateStudyPlan() {
                const subjects = this.subjectsInput.value.trim();
                const deadlines = this.deadlinesInput.value.trim();
                const startDateStr = this.startDateInput.value;
                const duration = parseInt(this.durationInput.value);
                const intensity = this.intensityInput.value; // Get intensity
                const preferredTimes = this.preferredTimesInput.value.trim(); // Get preferred times

                if (!subjects || !deadlines || !startDateStr || isNaN(duration) || duration < 1 || duration > 30) {
                    displayMessage('Por favor, preencha todos os campos do plano de estudos corretamente (incluindo uma data de início e duração entre 1 e 30 dias).', 'error', this.generatePlanBtn);
                    return;
                }

                toggleLoadingState(this.generatePlanBtn, this.planLoader, true);
                this.subjectsInput.disabled = true;
                this.deadlinesInput.disabled = true;
                this.startDateInput.disabled = true;
                this.durationInput.disabled = true;
                this.intensityInput.disabled = true; // Disable intensity input
                this.preferredTimesInput.disabled = true; // Disable preferred times input
                this.generatedPlanOutput.innerHTML = '<p class="text-slate-500 italic">A analisar as suas informações...</p>';
                this.clearPlanBtn.classList.add('hidden');

                try {
                    await new Promise(resolve => setTimeout(resolve, 500)); 
                    this.generatedPlanOutput.innerHTML = '<p class="text-slate-500 italic">A gerar o seu plano de estudos... Por favor, aguarde.</p>';
                    await new Promise(resolve => setTimeout(resolve, 500));

                    // Construct a more detailed prompt for the AI
                    const prompt = `Crie um plano de estudos detalhado e otimizado para ${duration} dias, começando em ${startDateStr} (formato AAAA-MM-DD), em português (Portugal).
                    Incorpore os princípios da Técnica Pomodoro (blocos de foco de 25min, pausas curtas de 5min, pausas longas de 15-30min a cada 4 pomodoros) e Repetição Espaçada (revisão de tópicos anteriores em intervalos crescentes).

                    Informações fornecidas pelo estudante:
                    Disciplinas/Tópicos de estudo:
                    ${subjects}

                    Prazos e Exames importantes:
                    ${deadlines}

                    Preferência de intensidade diária de estudo: ${intensity}.
                    Períodos preferenciais para estudo: ${preferredTimes || 'qualquer período'}.

                    O plano deve ser estruturado como um array JSON, onde cada objeto representa um dia e contém as chaves:
                    - "day": String (Ex: "Dia 1", "Dia 2")
                    - "date_hint": String (Ex: "Julho 05, 2025" - data exata calculada a partir da data de início)
                    - "focus_areas": Array de Strings (Disciplinas/tópicos para foco principal no dia, 1 a 3 tópicos)
                    - "suggested_activities": Array de Strings (Atividades de estudo detalhadas, incluindo o número de Pomodoros sugeridos, revisões, pausas, e que façam referência à aplicação da Repetição Espaçada. Use frases curtas e diretas. Não use asteriscos, negritos, ou outras formatações Markdown além do texto simples. Ex: "4 Pomodoros de Cálculo I (Novos conceitos)", "2 Pomodoros de Gramática (Revisão ativa com flashcards)", "Pausa Longa: 30 min", "Revisão rápida de notas do dia")

                    Certifique-se de que as atividades sejam realistas e distribuídas de forma inteligente para evitar sobrecarga. Considere os prazos ao distribuir os tópicos e priorize as preferências de horário e intensidade.
                    `;

                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = {
                        contents: chatHistory,
                        generationConfig: {
                            responseMimeType: "application/json",
                            responseSchema: {
                                type: "ARRAY",
                                items: {
                                    type: "OBJECT",
                                    properties: {
                                        day: { type: "STRING" },
                                        date_hint: { type: "STRING" },
                                        focus_areas: { type: "ARRAY", items: { type: "STRING" } },
                                        suggested_activities: { type: "ARRAY", items: { type: "STRING" } }
                                    },
                                    propertyOrdering: ["day", "date_hint", "focus_areas", "suggested_activities"]
                                }
                            }
                        }
                    };
                    const apiKey = "";

                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        
                        const jsonString = result.candidates[0].content.parts[0].text;
                        const parsedPlan = JSON.parse(jsonString);

                        // Map over the parsed plan to add isCompleted status to each activity
                        this.studyPlan = parsedPlan.map(dayPlan => ({
                            ...dayPlan,
                            suggested_activities: dayPlan.suggested_activities.map(activityText => ({
                                text: activityText,
                                isCompleted: false // Default to not completed
                            }))
                        }));
                        
                        this.saveStudyPlan();
                        this.renderStudyPlan();
                        displayMessage('Plano de estudos gerado com sucesso!', 'success', this.generatePlanBtn);
                    } else {
                        throw new Error('Não foi possível gerar o plano de estudos. Resposta da API inesperada.');
                    }
                } catch (error) {
                    console.error('Erro ao chamar a API Gemini para gerar plano de estudos:', error);
                    this.generatedPlanOutput.innerHTML = `<p class="text-red-600">Erro ao gerar plano de estudos: ${error.message}. Por favor, tente novamente.</p>`;
                    displayMessage(`Erro ao gerar plano: ${error.message}.`, 'error', this.generatePlanBtn);
                } finally {
                    toggleLoadingState(this.generatePlanBtn, this.planLoader, false);
                    this.subjectsInput.disabled = false;
                    this.deadlinesInput.disabled = false;
                    this.startDateInput.disabled = false;
                    this.durationInput.disabled = false;
                    this.intensityInput.disabled = false; // Re-enable intensity input
                    this.preferredTimesInput.disabled = false; // Re-enable preferred times input
                    feather.replace();
                }
            }

            /**
             * Clears the generated study plan and input fields.
             */
            clearStudyPlan() {
                showCustomConfirm(
                    'Confirmar Limpeza',
                    'Tem certeza que deseja limpar o plano de estudos atual?',
                    () => {
                        this.studyPlan = [];
                        this.saveStudyPlan();
                        this.renderStudyPlan();
                        this.subjectsInput.value = '';
                        this.deadlinesInput.value = '';
                        this.startDateInput.value = ''; // Clear start date
                        this.durationInput.value = '7'; // Reset to default
                        this.intensityInput.value = 'moderada'; // Reset to default
                        this.preferredTimesInput.value = ''; // Clear preferred times
                        displayMessage('Plano de estudos limpo.', 'info', this.clearPlanBtn);
                    }
                );
            }

            /**
             * Sets up event listeners for the study planner.
             */
            setupEventListeners() {
                if (this.generatePlanBtn) {
                    this.generatePlanBtn.addEventListener('click', () => this.generateStudyPlan());
                }
                if (this.clearPlanBtn) {
                    this.clearPlanBtn.addEventListener('click', () => this.clearStudyPlan());
                }
            }

            /**
             * Initializes the StudyPlanner.
             */
            init() {
                this.loadStudyPlan();
                this.setupEventListeners();
            }
        }

        /**
         * Manages the Pomodoro Timer functionality.
         */
        class PomodoroTimer {
            constructor() {
                this.pomodoroDisplay = document.getElementById('pomodoro-display');
                this.pomodoroStatus = document.querySelector('.pomodoro-status');
                this.pomodoroStartBtn = document.getElementById('pomodoro-start');
                this.pomodoroPauseBtn = document.getElementById('pomodoro-pause');
                this.pomodoroResetBtn = document.getElementById('pomodoro-reset');
                this.pomodoroFocusTimeInput = document.getElementById('pomodoro-focus-time');
                this.pomodoroShortBreakTimeInput = document.getElementById('pomodoro-short-break-time');
                this.pomodoroLongBreakTimeInput = document.getElementById('pomodoro-long-break-time'); 

                this.countdown = null;
                this.timeLeft = 0;
                this.currentMode = 'focus'; // States: 'focus', 'shortBreak', 'longBreak'
                this.pomodoroCount = 0;
                this.isRunning = false;

                this.timerEndSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-sci-fi-bleep-913.mp3');
            }

            /**
             * Updates the timer display in MM:SS format.
             */
            updateTimerDisplay() {
                const minutes = Math.floor(this.timeLeft / 60);
                const seconds = this.timeLeft % 60;
                this.pomodoroDisplay.textContent = `${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                this.pomodoroDisplay.setAttribute('aria-label', `${minutes} minutos e ${seconds} segundos restantes.`);
            }

            /**
             * Sets the initial timer duration based on the current mode.
             * Includes input validation and visual feedback.
             */
            setTimer() {
                // Remove feedback class from all inputs first
                this.pomodoroFocusTimeInput.classList.remove('input-feedback-pulse');
                this.pomodoroShortBreakTimeInput.classList.remove('input-feedback-pulse');
                this.pomodoroLongBreakTimeInput.classList.remove('input-feedback-pulse');

                let focusTime = parseInt(this.pomodoroFocusTimeInput.value);
                let shortBreakTime = parseInt(this.pomodoroShortBreakTimeInput.value);
                let longBreakTime = parseInt(this.pomodoroLongBreakTimeInput.value);

                // Input Validation for Focus Time
                if (isNaN(focusTime) || focusTime < 1) {
                    displayMessage('Tempo de Foco inválido. Resetando para 25 minutos.', 'error', this.pomodoroFocusTimeInput);
                    this.pomodoroFocusTimeInput.value = 25;
                    focusTime = 25;
                }
                // Input Validation for Short Break Time
                if (isNaN(shortBreakTime) || shortBreakTime < 1) {
                    displayMessage('Tempo de Pausa Curta inválido. Resetando para 5 minutos.', 'error', this.pomodoroShortBreakTimeInput);
                    this.pomodoroShortBreakTimeInput.value = 5;
                    shortBreakTime = 5;
                }
                // Input Validation for Long Break Time
                if (isNaN(longBreakTime) || longBreakTime < 1) {
                    displayMessage('Tempo de Pausa Longa inválido. Resetando para 15 minutos.', 'error', this.pomodoroLongBreakTimeInput);
                    this.pomodoroLongBreakTimeInput.value = 15;
                    longBreakTime = 15;
                }

                // Add pulse feedback to the input that was just changed, or all if it's initial setup
                const activeElement = document.activeElement;
                if (activeElement === this.pomodoroFocusTimeInput) {
                    this.pomodoroFocusTimeInput.classList.add('input-feedback-pulse');
                } else if (activeElement === this.pomodoroShortBreakTimeInput) {
                    this.pomodoroShortBreakTimeInput.classList.add('input-feedback-pulse');
                } else if (activeElement === this.pomodoroLongBreakTimeInput) {
                    this.pomodoroLongBreakTimeInput.classList.add('input-feedback-pulse');
                } else {
                    // On initial load or reset, apply pulse to all for a moment to show they are "set"
                    this.pomodoroFocusTimeInput.classList.add('input-feedback-pulse');
                    this.pomodoroShortBreakTimeInput.classList.add('input-feedback-pulse');
                    this.pomodoroLongBreakTimeInput.classList.add('input-feedback-pulse');
                }
                // Remove the pulse after a short delay
                setTimeout(() => {
                    this.pomodoroFocusTimeInput.classList.remove('input-feedback-pulse');
                    this.pomodoroShortBreakTimeInput.classList.remove('input-feedback-pulse');
                    this.pomodoroLongBreakTimeInput.classList.remove('input-feedback-pulse');
                }, 1500); // Duration of the pulse animation

                if (this.currentMode === 'focus') {
                    this.timeLeft = focusTime * 60;
                    this.pomodoroStatus.textContent = 'Foco';
                    this.pomodoroDisplay.style.color = '#1e40af';
                } else if (this.currentMode === 'shortBreak') {
                    this.timeLeft = shortBreakTime * 60;
                    this.pomodoroStatus.textContent = 'Pausa Curta';
                    this.pomodoroDisplay.style.color = '#10b981';
                } else if (this.currentMode === 'longBreak') {
                    this.timeLeft = longBreakTime * 60;
                    this.pomodoroStatus.textContent = 'Pausa Longa';
                    this.pomodoroDisplay.style.color = '#8b5cf6';
                }
                this.updateTimerDisplay();
            }

            /**
             * Starts the timer.
             */
            startTimer() {
                if (this.isRunning) return;
                this.isRunning = true;
                this.pomodoroStartBtn.disabled = true;
                this.pomodoroPauseBtn.disabled = false;

                this.countdown = setInterval(() => {
                    this.timeLeft--;
                    this.updateTimerDisplay();

                    if (this.timeLeft <= 0) {
                        clearInterval(this.countdown);
                        this.isRunning = false;
                        
                        // Play sound, catching potential errors due to autoplay policies
                        this.timerEndSound.play().catch(error => {
                            console.warn("Could not play timer sound, user interaction may be required:", error);
                            // Optionally, display a subtle message to the user if sound is critical
                            // displayMessage('O som do timer não pôde ser reproduzido automaticamente.', 'info', this.pomodoroDisplay);
                        });
                        
                        if (this.currentMode === 'focus') {
                            this.pomodoroCount++;
                            if (this.pomodoroCount % 4 === 0) {
                                this.currentMode = 'longBreak';
                            } else {
                                this.currentMode = 'shortBreak';
                            }
                        } else {
                            this.currentMode = 'focus';
                        }
                        this.setTimer();
                        this.pomodoroStartBtn.disabled = false;
                        this.pomodoroPauseBtn.disabled = true;
                    }
                }, 1000);
            }

            /**
             * Pauses the timer.
             */
            pauseTimer() {
                clearInterval(this.countdown);
                this.isRunning = false;
                this.pomodoroStartBtn.disabled = false;
                this.pomodoroPauseBtn.disabled = true;
            }

            /**
             * Resets the timer to the initial focus state.
             */
            resetTimer() {
                clearInterval(this.countdown);
                this.isRunning = false;
                this.pomodoroCount = 0;
                this.currentMode = 'focus';
                this.setTimer();
                this.pomodoroStartBtn.disabled = false;
                this.pomodoroPauseBtn.disabled = true;
            }

            /**
             * Sets up event listeners for the Pomodoro Timer controls.
             */
            setupEventListeners() {
                if (this.pomodoroStartBtn) {
                    this.pomodoroStartBtn.addEventListener('click', () => this.startTimer());
                }
                if (this.pomodoroPauseBtn) {
                    this.pomodoroPauseBtn.addEventListener('click', () => this.pauseTimer());
                }
                if (this.pomodoroResetBtn) {
                    this.pomodoroResetBtn.addEventListener('click', () => this.resetTimer());
                }

                // Add change listeners for inputs to update timer immediately
                if (this.pomodoroFocusTimeInput) {
                    this.pomodoroFocusTimeInput.addEventListener('change', () => this.setTimer());
                }
                if (this.pomodoroShortBreakTimeInput) {
                    this.pomodoroShortBreakTimeInput.addEventListener('change', () => this.setTimer());
                }
                if (this.pomodoroLongBreakTimeInput) {
                    this.pomodoroLongBreakTimeInput.addEventListener('change', () => this.setTimer());
                }
            }

            /**
             * Initializes the PomodoroTimer.
             */
            init() {
                this.setTimer();
                this.setupEventListeners();
            }
        }
    </script>
</body>
</html>
